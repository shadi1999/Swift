(this["webpackJsonpswiftcourse-client"]=this["webpackJsonpswiftcourse-client"]||[]).push([[0],{387:function(e,t,a){e.exports=a.p+"static/media/default-monochrome.3a32a11f.svg"},392:function(e,t,a){e.exports=a(746)},398:function(e,t,a){},693:function(e,t){},745:function(e,t,a){},746:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),s=a(12),i=a.n(s),l=(a(397),a(398),a(7)),u=a(81),m=a(8),d=a(25),p=a(750),f=a(787),h=a(790),E=a(798),b=a(61),g=(a(131),a(4)),v=a.n(g),y=a(15),S=a(17),k=a.n(S),T=function(e){e?(k.a.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete k.a.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},C=a(799),O=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=Object(C.a)();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},w={URL:{Server:"https://www.swiftcourse.me",Client:"http://localhost:3000"}},_=w.URL.Server,x=function(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get(_+"/api/auth/");case 3:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"AUTH_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},I=p.a.Content,A=(p.a.Sider,Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{login:function(e,t){return function(){var a=Object(y.a)(v.a.mark((function a(n){var r,o,c,s,i,l,u,m,d,p;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={"Content-Type":"application/json"},o=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,k.a.post(_+"/api/auth/",o,{headers:r});case 5:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(x()),a.next=34;break;case 10:if(a.prev=10,a.t0=a.catch(2),!(s=a.t0.response.data.errors)){a.next=33;break}for(i=!0,l=!1,u=void 0,a.prev=17,m=s[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)p=d.value,n(O(p.msg,"error",1e5));a.next=25;break;case 21:a.prev=21,a.t1=a.catch(17),l=!0,u=a.t1;case 25:a.prev=25,a.prev=26,i||null==m.return||m.return();case 28:if(a.prev=28,!l){a.next=31;break}throw u;case 31:return a.finish(28);case 32:return a.finish(25);case 33:n({type:"LOGIN_FAIL"});case 34:case"end":return a.stop()}}),a,null,[[2,10],[17,21,25,33],[26,,28,32]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,n=e.user,r={wrapperCol:{offset:8,span:8}},s=f.a.useForm();Object(d.a)(s,1)[0];return a&&n?c.a.createElement(u.a,{to:"/dashboard"}):c.a.createElement(o.Fragment,null,c.a.createElement(I,null,c.a.createElement("h1",null,"Login Page"),c.a.createElement(f.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:8}},{name:"basic",initialValues:{remember:!0},onFinish:function(e){var a=e.email,n=e.password;t(a,n)}}),c.a.createElement(f.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(h.a,null)),c.a.createElement(f.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(h.a.Password,null)),c.a.createElement(f.a.Item,Object.assign({},r,{name:"remember",valuePropName:"checked"}),c.a.createElement(E.a,null,"Remember me"),c.a.createElement("br",null),"      "),c.a.createElement(f.a.Item,r,c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Submit")),c.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"),c.a.createElement("br",null),"Don't have an account? ",c.a.createElement(l.b,{to:"/register/student"},"Sign up as a student")," or ",c.a.createElement(l.b,{to:"/register/tutor"},"sign up as a tutor"),".")))}))),L=a(792),j=Object(m.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return c.a.createElement(L.a,{key:e.id,message:e.msg,type:e.alertType,showIcon:!0})}))})),P=a(6),D=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:O,registerTutor:function(e){var t=e.name,a=e.email,n=e.password;return(function(){var e=Object(y.a)(v.a.mark((function e(r){var o,c,s,i,l,u,m,d,p,f;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,k.a.post(_+"/api/tutors",c,o);case 5:s=e.sent,r({type:"REGISTER_SUCCESS",payload:s.data}),r(x()),e.next=35;break;case 10:if(e.prev=10,e.t0=e.catch(2),!e.t0.response){e.next=33;break}for(i=e.t0.response.data.errors,l=!0,u=!1,m=void 0,e.prev=17,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,r(O(f.msg,"error",12e3));e.next=25;break;case 21:e.prev=21,e.t1=e.catch(17),u=!0,m=e.t1;case 25:e.prev=25,e.prev=26,l||null==d.return||d.return();case 28:if(e.prev=28,!u){e.next=31;break}throw m;case 31:return e.finish(28);case 32:return e.finish(25);case 33:console.log("Error",e.t0),r({type:"REGISTER_FAIL"});case 35:case"end":return e.stop()}}),e,null,[[2,10],[17,21,25,33],[26,,28,32]])})));return function(t){return e.apply(this,arguments)}}())}})((function(e){var t=e.setAlert,a=e.registerTutor,n=e.isAuthenticated,r=f.a.useForm(),s=Object(d.a)(r,1)[0];return n?c.a.createElement(u.a,{to:"/dashboard"}):c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Registration page for tutors"),c.a.createElement(f.a,{form:s,onFinish:function(e){var n=e.name,r=e.email,o=e.password;o!==e.password2?t("Passwords do not match","error"):a({name:n,email:r,password:o})},initialValues:{Private:!1,record:!1}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input your name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Register"),c.a.createElement("br",null),c.a.createElement("br",null),"Already have an account? ",c.a.createElement(l.b,{to:"/login"},"Login")))})),N=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:O,registerStudent:function(e){var t=e.name,a=e.email,n=e.password;return(function(){var e=Object(y.a)(v.a.mark((function e(r){var o,c,s,i,l,u,m,d,p,f;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,k.a.post(_+"/api/students",c,o);case 5:s=e.sent,r({type:"REGISTER_SUCCESS",payload:s.data}),r(x()),e.next=35;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),!(i=e.t0.response.data.errors)){e.next=34;break}for(l=!0,u=!1,m=void 0,e.prev=18,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,r(O(f.msg,"error",1e5));e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),u=!0,m=e.t1;case 26:e.prev=26,e.prev=27,l||null==d.return||d.return();case 29:if(e.prev=29,!u){e.next=32;break}throw m;case 32:return e.finish(29);case 33:return e.finish(26);case 34:r({type:"REGISTER_FAIL"});case 35:case"end":return e.stop()}}),e,null,[[2,10],[18,22,26,34],[27,,29,33]])})));return function(t){return e.apply(this,arguments)}}())}})((function(e){var t=e.setAlert,a=e.registerStudent,n=e.isAuthenticated,r=f.a.useForm(),s=Object(d.a)(r,1)[0];return n?c.a.createElement(u.a,{to:"/dashboard"}):c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Registration page for students"),c.a.createElement(f.a,{form:s,onFinish:function(e){var n=e.name,r=e.email,o=e.password;o!==e.password2?t("Passwords do not match","error"):a({name:n,email:r,password:o})},initialValues:{Private:!1,record:!1}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input your name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Register"),c.a.createElement("br",null),c.a.createElement("br",null),"Already have an account? ",c.a.createElement(l.b,{to:"/login"},"Login")))})),R=a(794),U=function(){return c.a.createElement(R.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:c.a.createElement(l.b,{to:"/"},c.a.createElement(b.a,{type:"primary"},"Back Home"))})},M=a(791),F=a(788),G=a(762),B=a(21),V=w.URL.Server,q=function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r,o){var c,s,i,l,u,m,d,p,f,h,E,b,g;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.name,s=e.email,i=e._id,l={headers:{"Content-Type":"application/json"}},u=JSON.stringify({name:c,email:s,_id:i}),n.prev=3,r({type:"EDIT_TOTUR"}),n.next=7,k.a.put(V+"/api/tutors",u,l);case 7:m=o().admin.tutors.filter((function(e){return e._id!==i})),m=[].concat(Object(B.a)(m),[e]),setTimeout((function(){r({type:"EDIT_TUTOR_SUCCESS",payload:m}),t.push(a)}),2e3),n.next=37;break;case 12:if(n.prev=12,n.t0=n.catch(3),!n.t0.response){n.next=35;break}for(d=n.t0.response.data.errors,p=!0,f=!1,h=void 0,n.prev=19,E=d[Symbol.iterator]();!(p=(b=E.next()).done);p=!0)g=b.value,r(O(g.msg,"error",12e3));n.next=27;break;case 23:n.prev=23,n.t1=n.catch(19),f=!0,h=n.t1;case 27:n.prev=27,n.prev=28,p||null==E.return||E.return();case 30:if(n.prev=30,!f){n.next=33;break}throw h;case 33:return n.finish(30);case 34:return n.finish(27);case 35:console.log("Error",n.t0),r({type:"EDIT_TUTOR_FAIL"});case 37:case"end":return n.stop()}}),n,null,[[3,12],[19,23,27,35],[28,,30,34]])})));return function(e,t){return n.apply(this,arguments)}}()},J=function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r,o){var c,s,i,l,u,m,d,p,f;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_TUTOR"}),n.next=5,k.a.delete(V+"/api/tutors/".concat(e),c);case 5:s=o().admin.tutors.filter((function(t){return t._id!==e})),setTimeout((function(){r({type:"DELETE_TUTOR_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=34;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),!(i=n.t0.response.data.errors)){n.next=33;break}for(l=!0,u=!1,m=void 0,n.prev=17,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,r(O(f.msg,"error",1e5));n.next=25;break;case 21:n.prev=21,n.t1=n.catch(17),u=!0,m=n.t1;case 25:n.prev=25,n.prev=26,l||null==d.return||d.return();case 28:if(n.prev=28,!u){n.next=31;break}throw m;case 31:return n.finish(28);case 32:return n.finish(25);case 33:r({type:"DELETE_TUTOR_FAIL"});case 34:case"end":return n.stop()}}),n,null,[[1,9],[17,21,25,33],[26,,28,32]])})));return function(e,t){return n.apply(this,arguments)}}()},z=function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r,o){var c,s,i,l,u,m,d,p,f,h,E,b,g;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.name,s=e.email,i=e._id,l={headers:{"Content-Type":"application/json"}},u=JSON.stringify({name:c,email:s,_id:i}),n.prev=3,r({type:"EDIT_STUDENT"}),n.next=7,k.a.put(V+"/api/students",u,l);case 7:m=o().admin.students.filter((function(e){return e._id!==i})),m=[].concat(Object(B.a)(m),[e]),setTimeout((function(){r({type:"EDIT_STUDENT_SUCCESS",payload:m}),t.push(a)}),2e3),n.next=37;break;case 12:if(n.prev=12,n.t0=n.catch(3),!n.t0.response){n.next=35;break}for(d=n.t0.response.data.errors,p=!0,f=!1,h=void 0,n.prev=19,E=d[Symbol.iterator]();!(p=(b=E.next()).done);p=!0)g=b.value,r(O(g.msg,"error",12e3));n.next=27;break;case 23:n.prev=23,n.t1=n.catch(19),f=!0,h=n.t1;case 27:n.prev=27,n.prev=28,p||null==E.return||E.return();case 30:if(n.prev=30,!f){n.next=33;break}throw h;case 33:return n.finish(30);case 34:return n.finish(27);case 35:console.log("Error",n.t0),r({type:"EDIT_STUDENT_FAIL"});case 37:case"end":return n.stop()}}),n,null,[[3,12],[19,23,27,35],[28,,30,34]])})));return function(e,t){return n.apply(this,arguments)}}()},H=function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r,o){var c,s,i,l,u,m,d,p,f;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_STUDENT"}),n.next=5,k.a.delete(V+"/api/students/".concat(e),c);case 5:s=o().admin.students.filter((function(t){return t._id!==e})),setTimeout((function(){r({type:"DELETE_STUDENT_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=34;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),!(i=n.t0.response.data.errors)){n.next=33;break}for(l=!0,u=!1,m=void 0,n.prev=17,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,r(O(f.msg,"error",1e5));n.next=25;break;case 21:n.prev=21,n.t1=n.catch(17),u=!0,m=n.t1;case 25:n.prev=25,n.prev=26,l||null==d.return||d.return();case 28:if(n.prev=28,!u){n.next=31;break}throw m;case 31:return n.finish(28);case 32:return n.finish(25);case 33:r({type:"DELETE_STUDENT_FAIL"});case 34:case"end":return n.stop()}}),n,null,[[1,9],[17,21,25,33],[26,,28,32]])})));return function(e,t){return n.apply(this,arguments)}}()},W=function(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r,o,c,s,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get(V+"/api/classrooms");case 3:a=e.sent,t({type:"GET_CLASSROOMS",payload:a.data}),e.next=31;break;case 7:if(e.prev=7,e.t0=e.catch(0),console.log(e.t0),!(n=e.t0.response.data.errors)){e.next=31;break}for(r=!0,o=!1,c=void 0,e.prev=15,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)l=i.value,t(O(l.msg,"error",1e5));e.next=23;break;case 19:e.prev=19,e.t1=e.catch(15),o=!0,c=e.t1;case 23:e.prev=23,e.prev=24,r||null==s.return||s.return();case 26:if(e.prev=26,!o){e.next=29;break}throw c;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}}),e,null,[[0,7],[15,19,23,31],[24,,26,30]])})));return function(t){return e.apply(this,arguments)}}()},Y=Object(m.b)((function(e){return{tutors:e.admin.tutors,loading:e.admin.loading}}),{getTutors:function(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r,o,c,s,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get(V+"/api/tutors");case 3:a=e.sent,t({type:"GET_TUTORS",payload:a.data}),e.next=31;break;case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response){e.next=30;break}for(n=e.t0.response.data.errors,r=!0,o=!1,c=void 0,e.prev=14,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)l=i.value,t(O(l.msg,"error",12e3));e.next=22;break;case 18:e.prev=18,e.t1=e.catch(14),o=!0,c=e.t1;case 22:e.prev=22,e.prev=23,r||null==s.return||s.return();case 25:if(e.prev=25,!o){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:console.log("Error",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,7],[14,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.tutors,a=e.loading,n=e.getTutors;return Object(o.useEffect)((function(){n()}),[]),c.a.createElement(M.a,{avatar:!0,title:!1,loading:a,active:!0},c.a.createElement(F.a,{loading:a,itemLayout:"horizontal",dataSource:t,renderItem:function(e){return c.a.createElement(F.a.Item,{actions:[c.a.createElement(l.b,{key:"tutor-edit",to:"/dashboard/tutor/".concat(e._id)},"edit")]},c.a.createElement(F.a.Item.Meta,{avatar:c.a.createElement(G.a,{icon:c.a.createElement(P.b,{type:"user"})}),title:c.a.createElement(l.b,{to:"/dashboard/tutor/".concat(e._id)},e.name)}))}}))})),K=a(378),$=a(755),Q=Object(m.b)((function(e){return{admin:e.auth.user,loading:e.auth.loading}}),{setAlert:O,addAdmin:function(e,t,a){var n=e.name,r=e.email,o=e.password;return(function(){var e=Object(y.a)(v.a.mark((function e(c){var s,i,l,u,m,d,p,f,h,E;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json"}},i=JSON.stringify({name:n,email:r,password:o}),e.prev=2,e.next=5,k.a.post(V+"/api/administrators",i,s);case 5:l=e.sent,setTimeout((function(){c({type:"REGISTER_SUCCESS",payload:l.data}),t.push(a)}),2e3),c(x()),e.next=35;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),!(u=e.t0.response.data.errors)){e.next=34;break}for(m=!0,d=!1,p=void 0,e.prev=18,f=u[Symbol.iterator]();!(m=(h=f.next()).done);m=!0)E=h.value,c(O(E.msg,"error",1e5));e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),d=!0,p=e.t1;case 26:e.prev=26,e.prev=27,m||null==f.return||f.return();case 29:if(e.prev=29,!d){e.next=32;break}throw p;case 32:return e.finish(29);case 33:return e.finish(26);case 34:c({type:"REGISTER_FAIL"});case 35:case"end":return e.stop()}}),e,null,[[2,10],[18,22,26,34],[27,,29,33]])})));return function(t){return e.apply(this,arguments)}}())}})((function(e){var t=e.setAlert,a=e.addAdmin,n=e.loading,r=Object(u.g)(),s=f.a.useForm(),i=Object(d.a)(s,1)[0];return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Add Extra Administrator"),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:n},c.a.createElement(f.a,{form:i,onFinish:function(e){var n=e.name,o=e.email,c=e.password;c!==e.password2?t("Passwords do not match","error"):a({name:n,email:o,password:c},r,"/dashboard")},initialValues:{Private:!1,record:!1}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input the admin email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of the new administrator"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input the admin name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name of the new administrator"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Add Administrator"))))})),X=a(795),Z=a(763),ee=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(X.a,{theme:"dark",mode:"inline"},c.a.createElement(X.a.Item,{key:"home"},c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement(P.b,{type:"home"}),"Home")),c.a.createElement(X.a.Item,{key:"tutors-list"},c.a.createElement(l.b,{to:"/dashboard/tutors"},c.a.createElement(P.b,{type:"team"}),"Tutors List")),c.a.createElement(X.a.Item,{key:"students-list"},c.a.createElement(l.b,{to:"/dashboard/students"},c.a.createElement(P.b,{type:"team"}),"Students List")),c.a.createElement(X.a.Item,{key:"classrooms"},c.a.createElement(l.b,{to:"/dashboard/classrooms"},c.a.createElement(P.b,{type:"video-camera"}),"Classrooms")),c.a.createElement(X.a.Item,{key:"add-classroom"},c.a.createElement(l.b,{to:"/dashboard/addClassroom"},c.a.createElement(Z.a,null),"New Classroom")),c.a.createElement(X.a.Item,{key:"add-extra-admin"},c.a.createElement(l.b,{to:"/dashboard/addAdmin"},c.a.createElement(P.b,{type:"user-add"}),"Add an Extra Admin"))))},te=Object(m.b)((function(e){return{students:e.admin.students,loading:e.admin.loading}}),{getStudents:function(){return function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n,r,o,c,s,i,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get(V+"/api/students");case 3:a=e.sent,t({type:"GET_STUDENTS",payload:a.data}),e.next=31;break;case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response){e.next=30;break}for(n=e.t0.response.data.errors,r=!0,o=!1,c=void 0,e.prev=14,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)l=i.value,t(O(l.msg,"error",12e3));e.next=22;break;case 18:e.prev=18,e.t1=e.catch(14),o=!0,c=e.t1;case 22:e.prev=22,e.prev=23,r||null==s.return||s.return();case 25:if(e.prev=25,!o){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:console.log("Error",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,7],[14,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.students,a=e.loading,n=e.getStudents;return Object(o.useEffect)((function(){n()}),[]),c.a.createElement(M.a,{avatar:!0,title:!1,loading:a,active:!0},c.a.createElement(F.a,{loading:a,itemLayout:"horizontal",dataSource:t,renderItem:function(e){return c.a.createElement(F.a.Item,{actions:[c.a.createElement(l.b,{key:"student-edit",to:"/dashboard/student/".concat(e._id)},"edit")]},c.a.createElement(F.a.Item.Meta,{avatar:c.a.createElement(G.a,{icon:c.a.createElement(P.b,{type:"user"})}),title:c.a.createElement(l.b,{to:"/dashboard/student/".concat(e._id)},e.name)}))}}))})),ae=a(19),ne=a(764),re=a(765),oe=Object(m.b)((function(e){return{tutors:e.admin.tutors,loading:e.admin.loading}}),{editTutor:q,deleteTutor:J})((function(e){var t,a=e.tutors,n=e.editTutor,r=e.deleteTutor,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=a.find((function(e){return e._id===p})))&&m.setFieldsValue({email:t.email,name:t.name})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit tutor"),c.a.createElement("p",null,"Edit the tutors information."),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,i,"/dashboard/tutors/")}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of tutor"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name of tutor"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Edit tutor"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete the tutor?",okText:"Yes",cancelText:"No",onConfirm:function(){r(p,i,"/dashboard/tutors/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete the tutor")))))})),ce=Object(m.b)((function(e){return{students:e.admin.students,loading:e.admin.loading}}),{editStudent:z,deleteStudent:H})((function(e){var t,a=e.students,n=e.editStudent,r=e.deleteStudent,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=a.find((function(e){return e._id===p})))&&m.setFieldsValue({email:t.email,name:t.name})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit student"),c.a.createElement("p",null,"Edit the student information."),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,i,"/dashboard/students/")}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of student"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name of student"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Edit student"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete the student?",okText:"Yes",cancelText:"No",onConfirm:function(){r(p,i,"/dashboard/students/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete the student")))))})),se=Object(m.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=t.loading?null:c.a.createElement("h1",null,"Welcome ",t.user.name," to the ",t.user.kind,"s Home Dashboard");return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.Fragment,null,c.a.createElement(M.a,{loading:t.loading},a)))})),ie=Object(m.b)((function(e){return{admin:e.auth.user,loading:e.auth.loading,classrooms:e.admin.classrooms}}),{setAlert:O,addClassroom:function(e,t,a){var n=e.id,r=e.tutor,o=e.Private,c=e.record;return(function(){var e=Object(y.a)(v.a.mark((function e(s){var i,l,u,m,d,p,f,h,E,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={headers:{"Content-Type":"application/json"}},l=JSON.stringify({id:n,tutor:r,Private:o,record:c}),e.prev=2,e.next=5,k.a.post(V+"/api/classrooms",l,i);case 5:u=e.sent,s({type:"ADD_CLASSROOM",payload:u.data}),setTimeout((function(){t.push(a)}),2e3),e.next=34;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),!(m=e.t0.response.data.errors)){e.next=34;break}for(d=!0,p=!1,f=void 0,e.prev=18,h=m[Symbol.iterator]();!(d=(E=h.next()).done);d=!0)b=E.value,s(O(b.msg,"error",1e5));e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),p=!0,f=e.t1;case 26:e.prev=26,e.prev=27,d||null==h.return||h.return();case 29:if(e.prev=29,!p){e.next=32;break}throw f;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop()}}),e,null,[[2,10],[18,22,26,34],[27,,29,33]])})));return function(t){return e.apply(this,arguments)}}())},getClassrooms:W})((function(e){var t=e.setAlert,a=e.addClassroom,n=e.loading,r=e.classrooms,s=e.getClassrooms;Object(o.useEffect)((function(){s()}),[]);var i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0];return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Add a New Classroom"),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:n},c.a.createElement(f.a,{form:m,onFinish:function(e){var n=e.id,o=e.tutor,c=e.Private,s=e.record,l=!0,u=!1,m=void 0;try{for(var d,p=r[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){if(d.value.id===n)return void t("This classroom already exsist !","error")}}catch(f){u=!0,m=f}finally{try{l||null==p.return||p.return()}finally{if(u)throw m}}a({id:n,tutor:o,Private:c,record:s},i,"/dashboard/classrooms/")},initialValues:{Private:!1,record:!1}},c.a.createElement(f.a.Item,{name:"id",rules:[{required:!0,message:"Please input the course id!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"video-camera",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Classroom ID"})),c.a.createElement(f.a.Item,{name:"tutor",rules:[{required:!0,message:"Please input the tutor email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of new classroom's tutor"})),c.a.createElement(f.a.Item,{name:"Private",valuePropName:"checked"},c.a.createElement(E.a,null,"Private")),c.a.createElement(f.a.Item,{name:"record",valuePropName:"checked"},c.a.createElement(E.a,null,"Recored Lecture")),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Add Classroom"))))})),le=a(789),ue=Object(m.b)((function(e){return{admin:e.auth.user,classrooms:e.admin.classrooms,loading:e.admin.loading}}),{getClassrooms:W})((function(e){var t=e.getClassrooms,a=e.loading,n=e.classrooms;return Object(o.useEffect)((function(){t()}),[]),c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"All Classrooms"),c.a.createElement(F.a,{loading:a,grid:{gutter:16,column:4},dataSource:n,renderItem:function(e){return c.a.createElement(F.a.Item,null,c.a.createElement(le.a,{title:e.id},c.a.createElement(l.b,{to:"/dashboard/classrooms/".concat(e.id)},"View Classroom Information")))}}))})),me=a(766),de=a(767),pe=Object(m.b)((function(e){return{classrooms:e.admin.classrooms,loading:e.admin.loading}}),{editClassroom:function(e,t,a,n){return function(){var r=Object(y.a)(v.a.mark((function r(o,c){var s,i,l,u,m,d,p,f,h,E,b,g,y,S;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.id,i=e.Private,l=e.email,u=e.record,m={headers:{"Content-Type":"application/json"}},d=JSON.stringify({newid:t,id:s,Private:i,email:l,record:u}),r.prev=3,o({type:"EDIT_CLASSROOM"}),r.next=7,k.a.put(V+"/api/classrooms",d,m);case 7:p=c().admin.classrooms.filter((function(e){return e.id!==s})),p=[].concat(Object(B.a)(p),[e]),setTimeout((function(){o({type:"EDIT_CLASSROOM_SUCCESS",payload:p}),a.push(n)}),2e3),r.next=37;break;case 12:if(r.prev=12,r.t0=r.catch(3),console.log(r.t0),!(f=r.t0.response.data.errors)){r.next=36;break}for(h=!0,E=!1,b=void 0,r.prev=20,g=f[Symbol.iterator]();!(h=(y=g.next()).done);h=!0)S=y.value,o(O(S.msg,"error",1e5));r.next=28;break;case 24:r.prev=24,r.t1=r.catch(20),E=!0,b=r.t1;case 28:r.prev=28,r.prev=29,h||null==g.return||g.return();case 31:if(r.prev=31,!E){r.next=34;break}throw b;case 34:return r.finish(31);case 35:return r.finish(28);case 36:o({type:"EDIT_CLASSROOM_FAIL"});case 37:case"end":return r.stop()}}),r,null,[[3,12],[20,24,28,36],[29,,31,35]])})));return function(e,t){return r.apply(this,arguments)}}()},deleteClassroom:function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r,o){var c,s,i,l,u,m,d,p,f;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_CLASSROOM"}),n.next=5,k.a.delete(V+"/api/classrooms/".concat(e),c);case 5:return n.next=7,o().admin.classrooms.filter((function(t){return t.id!==e}));case 7:s=n.sent,setTimeout((function(){r({type:"DELETE_CLASSROOM_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=36;break;case 11:if(n.prev=11,n.t0=n.catch(1),console.log(n.t0),!(i=n.t0.response.data.errors)){n.next=35;break}for(l=!0,u=!1,m=void 0,n.prev=19,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,r(O(f.msg,"error",1e5));n.next=27;break;case 23:n.prev=23,n.t1=n.catch(19),u=!0,m=n.t1;case 27:n.prev=27,n.prev=28,l||null==d.return||d.return();case 30:if(n.prev=30,!u){n.next=33;break}throw m;case 33:return n.finish(30);case 34:return n.finish(27);case 35:r({type:"DELETE_CLASSROOM_FAIL"});case 36:case"end":return n.stop()}}),n,null,[[1,11],[19,23,27,35],[28,,30,34]])})));return function(e,t){return n.apply(this,arguments)}}()}})((function(e){var t,a=e.classrooms,n=e.editClassroom,r=e.deleteClassroom,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=a.find((function(e){return e.id===p})))&&m.setFieldsValue({newId:t.id,email:t.tutor.email,Private:!1,record:!1})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit Classroom"),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.newId,r=e.email,o=e.Private,c=e.record;t=Object(ae.a)({},t,{newId:a,email:r,Private:o,record:c}),a&&void 0!==o&&void 0!==c&&r?n(t,a,i,"/dashboard/classrooms/"):O("please provide all fields","error")},className:"center-form"},c.a.createElement(f.a.Item,{name:"newId",label:"Classroom ID",rules:[{required:!0,message:"Please input id!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"video-camera",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"id of classroom"})),c.a.createElement(f.a.Item,{name:"email",label:"Tutor's email",rules:[{required:!0,message:"Please input email of tutor!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of tutor"})),c.a.createElement(f.a.Item,{name:"Private",valuePropName:"checked"},c.a.createElement(E.a,null,"Private")),c.a.createElement(f.a.Item,{name:"record",valuePropName:"checked"},c.a.createElement(E.a,null,"Recored Lecture")),c.a.createElement(b.a,{type:"primary",htmlType:"submit",icon:c.a.createElement(me.a,null)},"Submit"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete the classroom?",okText:"Yes",cancelText:"No",onConfirm:function(){r(p,i,"/dashboard/classrooms/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0,icon:c.a.createElement(de.a,null)},"Delete the classroom")))))})),fe=p.a.Content,he=p.a.Sider,Ee=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(he,null,c.a.createElement(ee,null)),c.a.createElement(fe,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/dashboard/tutor/:id",component:oe}),c.a.createElement(u.b,{path:"/dashboard/tutors",component:Y}),c.a.createElement(u.b,{path:"/dashboard/addAdmin",component:Q}),c.a.createElement(u.b,{path:"/dashboard/student/:id",component:ce}),c.a.createElement(u.b,{path:"/dashboard/students",component:te}),c.a.createElement(u.b,{path:"/dashboard/addClassroom",component:ie}),c.a.createElement(u.b,{path:"/dashboard/classrooms/:id",component:pe}),c.a.createElement(u.b,{path:"/dashboard/classrooms",component:ue}),c.a.createElement(u.b,{path:"/dashboard",component:se}))))},be=a(768),ge=a(769),ve=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(X.a,{theme:"dark",mode:"inline"},c.a.createElement(X.a.Item,{key:"home"},c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement(be.a,null),"Home")),c.a.createElement(X.a.Item,{key:"my-classrooms"},c.a.createElement(l.b,{to:"/dashboard/myClassrooms"},c.a.createElement(ge.a,null),"My Classrooms"))))},ye=w.URL.Server,Se=function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n,r,o,c,s,i,l,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get(ye+"/api/classrooms/tutor/".concat(e._id));case 3:n=t.sent,a({type:"GET_TUTOR_CLASSROOMS",payload:n.data}),t.next=31;break;case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0.response){t.next=30;break}for(r=t.t0.response.data.errors,o=!0,c=!1,s=void 0,t.prev=14,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)u=l.value,a(O(u.msg,"error",12e3));t.next=22;break;case 18:t.prev=18,t.t1=t.catch(14),c=!0,s=t.t1;case 22:t.prev=22,t.prev=23,o||null==i.return||i.return();case 25:if(t.prev=25,!c){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:console.log("Error",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,7],[14,18,22,30],[23,,25,29]])})));return function(e){return t.apply(this,arguments)}}()},ke=Object(m.b)((function(e){return{tutor:e.auth.user,lectures:e.tutor.lectures,loading:e.tutor.loading}}),{getLectures:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n,r,o,c,s,i,l,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get(ye+"/api/classrooms/tutor/".concat(e._id,"/lectures"));case 3:n=t.sent,a({type:"GET_TUTOR_LECTURES",payload:n.data}),t.next=31;break;case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0.response){t.next=30;break}for(r=t.t0.response.data.errors,o=!0,c=!1,s=void 0,t.prev=14,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)u=l.value,a(O(u.msg,"error",12e3));t.next=22;break;case 18:t.prev=18,t.t1=t.catch(14),c=!0,s=t.t1;case 22:t.prev=22,t.prev=23,o||null==i.return||i.return();case 25:if(t.prev=25,!c){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:console.log("Error",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,7],[14,18,22,30],[23,,25,29]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.tutor,a=e.lectures,n=e.loading,r=e.getLectures,s=Object(u.h)().id,i=[],l=!0,m=!1,d=void 0;try{for(var p,f=a[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var h=p.value;h.id===s&&i.push(h)}}catch(E){m=!0,d=E}finally{try{l||null==f.return||f.return()}finally{if(m)throw d}}return Object(o.useEffect)((function(){r(t)}),[]),c.a.createElement(o.Fragment,null,c.a.createElement(F.a,{loading:n,grid:{gutter:16,column:4},dataSource:i,renderItem:function(e){return c.a.createElement(F.a.Item,null,c.a.createElement(le.a,{title:e.id},c.a.createElement("div",null,"Started On: ",e.pastLectures.startedOn,c.a.createElement("br",null)," Ended On: ",e.pastLectures.endedOn),c.a.createElement("div",null,"Attendance:",c.a.createElement("br",null)," ",e.pastLectures.attendance?e.pastLectures.attendance.map((function(e){return c.a.createElement(o.Fragment,null,c.a.createElement("p",null,"user:"+e.user+" duration:"+e.duration))})):c.a.createElement(o.Fragment,null,c.a.createElement("div",null,"No One.")))))}}))})),Te=Object(m.b)((function(e){return{tutor:e.auth.user,classrooms:e.tutor.classrooms,loading:e.tutor.loading}}),{getClassrooms:Se})((function(e){var t=e.tutor,a=e.classrooms,n=e.loading,r=e.getClassrooms;return Object(o.useEffect)((function(){r(t)}),[]),c.a.createElement(o.Fragment,null,c.a.createElement(F.a,{loading:n,grid:{gutter:16,column:4},dataSource:a,renderItem:function(e){return c.a.createElement(F.a.Item,null,c.a.createElement(le.a,{theme:"dark",className:"classroom-card",title:e.id,extra:c.a.createElement(l.b,{to:"/dashboard/classroom/".concat(e.id,"/info")},"Edit Info")},c.a.createElement(b.a,{type:"primary",href:"/classroom/".concat(e.id,"/tutor")},"Go to Classroom"),c.a.createElement(b.a,{href:"/dashboard/classroom/".concat(e.id,"/lectures")},"View Lectures")))}}))})),Ce=Object(m.b)((function(e){return{classrooms:e.tutor.classrooms,students:e.tutor.students}}),{getClassrooms:Se,addStudentToClassroom:function(e,t,a,n){return function(){var r=Object(y.a)(v.a.mark((function r(o){var c,s,i,l,u,m,d,p;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,{headers:{"Content-Type":"application/json"}},o({type:"ADD_STUDENT_TO_CLASSROOM"}),r.next=5,k.a.post(ye+"/api/classroom/".concat(t,"/students/").concat(e));case 5:c=r.sent,o({type:"ADD_STUDENT_TO_CLASSROOM_SUCCESS",payload:c.data}),a.push(n),r.next=35;break;case 10:if(r.prev=10,r.t0=r.catch(0),o({type:"ADD_STUDENT_TO_CLASSROOM_FAIL"}),!r.t0.response){r.next=35;break}for(s=r.t0.response.data.errors,i=!0,l=!1,u=void 0,r.prev=18,m=s[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)p=d.value,o(O(p.msg,"error",12e3));r.next=26;break;case 22:r.prev=22,r.t1=r.catch(18),l=!0,u=r.t1;case 26:r.prev=26,r.prev=27,i||null==m.return||m.return();case 29:if(r.prev=29,!l){r.next=32;break}throw u;case 32:return r.finish(29);case 33:return r.finish(26);case 34:console.log("Error",r.t0);case 35:case"end":return r.stop()}}),r,null,[[0,10],[18,22,26,34],[27,,29,33]])})));return function(e){return r.apply(this,arguments)}}()},getStudentsFromClassroom:function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r){var o,c,s,i,l,u,m,d,p;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o={headers:{"Content-Type":"application/json"}},r({type:"GET_STUDENTS_OF_CLASSROOM"}),n.next=5,k.a.get(ye+"/api/classroom/".concat(e,"/students"),o);case 5:c=n.sent,r({type:"GET_STUDENTS_OF_CLASSROOM_SUCCESS",payload:c.data}),t.push(a),n.next=35;break;case 10:if(n.prev=10,n.t0=n.catch(0),r({type:"GET_STUDENTS_OF_CLASSROOM_FAIL"}),!n.t0.response){n.next=35;break}for(s=n.t0.response.data.errors,i=!0,l=!1,u=void 0,n.prev=18,m=s[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)p=d.value,r(O(p.msg,"error",12e3));n.next=26;break;case 22:n.prev=22,n.t1=n.catch(18),l=!0,u=n.t1;case 26:n.prev=26,n.prev=27,i||null==m.return||m.return();case 29:if(n.prev=29,!l){n.next=32;break}throw u;case 32:return n.finish(29);case 33:return n.finish(26);case 34:console.log("Error",n.t0);case 35:case"end":return n.stop()}}),n,null,[[0,10],[18,22,26,34],[27,,29,33]])})));return function(e){return n.apply(this,arguments)}}()},deleteStudentFromClassroom:function(e,t,a,n){return function(){var r=Object(y.a)(v.a.mark((function r(o){var c,s,i,l,u,m,d,p,f;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={headers:{"Content-Type":"application/json"}},o({type:"DELETE_STUDENT_FROM_CLASSROOM"}),r.next=5,k.a.delete(ye+"/api/classroom/".concat(t,"/students/").concat(e),c);case 5:s=r.sent,o({type:"DELETE_STUDENT_FROM_CLASSROOM_SUCCESS",payload:s.data}),a.push(n),r.next=35;break;case 10:if(r.prev=10,r.t0=r.catch(0),!r.t0.response){r.next=35;break}for(o({type:"DELETE_STUDENT_FROM_CLASSROOM_FAIL"}),i=r.t0.response.data.errors,l=!0,u=!1,m=void 0,r.prev=18,d=i[Symbol.iterator]();!(l=(p=d.next()).done);l=!0)f=p.value,o(O(f.msg,"error",12e3));r.next=26;break;case 22:r.prev=22,r.t1=r.catch(18),u=!0,m=r.t1;case 26:r.prev=26,r.prev=27,l||null==d.return||d.return();case 29:if(r.prev=29,!u){r.next=32;break}throw m;case 32:return r.finish(29);case 33:return r.finish(26);case 34:console.log("Error",r.t0);case 35:case"end":return r.stop()}}),r,null,[[0,10],[18,22,26,34],[27,,29,33]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.getClassrooms,a=e.addStudentToClassroom,n=e.deleteStudentFromClassroom,r=e.getStudentsFromClassroom,s=e.classrooms,i=e.students,l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id,g=Object(u.g)(),v="/dashboard/classroom/".concat(p,"/info"),y=s.find((function(e){return e.id===p}));Object(o.useEffect)((function(){t()}),[y]);return c.a.createElement(o.Fragment,null,c.a.createElement(le.a,{title:y.id},c.a.createElement(E.a,{disabled:!0,defaultChecked:y.private},"Private"),c.a.createElement("br",null),c.a.createElement(E.a,{disabled:!0,defaultChecked:y.recordLectures},"Record Lectures"),c.a.createElement("hr",null),c.a.createElement(f.a,{form:m,onFinish:function(){r(p,g,v)}},c.a.createElement(b.a,{htmlType:"submit"},"view students"),c.a.createElement("br",null)),c.a.createElement(F.a,{dataSource:i,renderItem:function(e){return c.a.createElement(F.a.Item,{key:e._id},c.a.createElement(F.a.Item.Meta,{title:e.name,description:e.email}))}}),c.a.createElement("hr",null),c.a.createElement(f.a,{form:m,onFinish:function(e){var t=e.email;a(t,p,g,v)}},"Add or delete a student to the classroom ",c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(h.a,{type:"text",prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of the student",id:"email"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Add the student"),c.a.createElement(ne.a,{title:"Are you sure that you want to delete the student?",okText:"Yes",cancelText:"No",onConfirm:function(e){var t=e.email;n(t,p,g,v)},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete the student")))))})),Oe=p.a.Content,we=p.a.Sider,_e=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(we,null,c.a.createElement(ve,null)),c.a.createElement(Oe,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/dashboard/classroom/:id/info",component:Ce}),c.a.createElement(u.b,{path:"/dashboard/classroom/:id/lectures",component:ke}),c.a.createElement(u.b,{path:"/dashboard/myClassrooms",component:Te}),c.a.createElement(u.b,{path:"/dashboard",component:se}))))},xe=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(X.a,{theme:"dark",mode:"inline"},c.a.createElement(X.a.Item,{key:"home"},c.a.createElement(l.b,{to:"/dashboard"},c.a.createElement(P.b,{type:"user"}),"Home")),c.a.createElement(X.a.Item,{key:"my-classrooms"},c.a.createElement(l.b,{to:"/dashboard/myClassrooms"},c.a.createElement(P.b,{type:"video-camera"}),"My classrooms"))))},Ie=w.URL.Server,Ae=Object(m.b)((function(e){return{student:e.auth.user,classrooms:e.student.classrooms,loading:e.student.loading}}),{getClassrooms:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n,r,o,c,s,i,l,u;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get(Ie+"/api/classrooms/student/".concat(e._id));case 3:n=t.sent,a({type:"GET_STUDENT_CLASSROOMS",payload:n.data}),t.next=31;break;case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0.response){t.next=30;break}for(r=t.t0.response.data.errors,o=!0,c=!1,s=void 0,t.prev=14,i=r[Symbol.iterator]();!(o=(l=i.next()).done);o=!0)u=l.value,a(O(u.msg,"error",12e3));t.next=22;break;case 18:t.prev=18,t.t1=t.catch(14),c=!0,s=t.t1;case 22:t.prev=22,t.prev=23,o||null==i.return||i.return();case 25:if(t.prev=25,!c){t.next=28;break}throw s;case 28:return t.finish(25);case 29:return t.finish(22);case 30:console.log("Error",t.t0);case 31:case"end":return t.stop()}}),t,null,[[0,7],[14,18,22,30],[23,,25,29]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.student,a=e.classrooms,n=e.loading,r=e.getClassrooms;return Object(o.useEffect)((function(){r(t)}),[]),c.a.createElement(o.Fragment,null,c.a.createElement(F.a,{loading:n,grid:{gutter:16,column:4},dataSource:a,renderItem:function(e){return c.a.createElement(F.a.Item,null,c.a.createElement(le.a,{title:e.id},c.a.createElement(l.b,{to:"/classroom/".concat(e.id)},"go to the classroom"),c.a.createElement("br",null),"given by: ",e.tutor.name,c.a.createElement("br",null),c.a.createElement(l.b,null,"view recorded lectures")))}}))})),Le=p.a.Content,je=p.a.Sider,Pe=function(){return c.a.createElement(o.Fragment,null,c.a.createElement(je,null,c.a.createElement(xe,null)),c.a.createElement(Le,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/dashboard/myClassrooms",component:Ae}),c.a.createElement(u.b,{path:"/dashboard",component:se}))))},De=function(e){var t=e.userKind;return"Administrator"===t?c.a.createElement(Ee,null):"Tutor"===t?c.a.createElement(_e,null):"Student"===t?c.a.createElement(Pe,null):c.a.createElement(u.a,{to:"/"})},Ne=a(114),Re=a(55),Ue=a(796),Me=a(786),Fe=a(770),Ge=function(e){var t=e.message,a=e.senderFirstName,n=e.color,r=e.type;return c.a.createElement("div",{className:"chat-message"},c.a.createElement("div",{className:"avatar"},c.a.createElement(G.a,{style:{backgroundColor:n,verticalAlign:"middle"},size:"large"},a)),c.a.createElement("div",{className:"talk-bubble tri-right left-in round"},function(){switch(r){case"text":return c.a.createElement("div",{className:"talktext"},c.a.createElement("p",null,t));case"image":return c.a.createElement("img",{className:"img-attachment",src:"".concat(w.URL.Server,"/files/").concat(t)});case"file":var e=/([^\/]+$)/.exec(t)[0];return c.a.createElement(b.a,{className:"file-attachment",type:"link",href:"".concat(w.URL.Server,"/files/").concat(t),target:"_blank"},e," ",c.a.createElement(Fe.a,null))}}()))},Be=a(379),Ve=a.n(Be),qe=function(e,t){return function(a,r){(n=Ve()("".concat(w.URL.Server,"?token=").concat(e,"&classroom=").concat(t))).on("connect",(function(){n.emit("loadLecture",null,(function(e,t){t=Je(t),a({type:"LOAD_LECTURE",payload:{hasStarted:e,onlineUsers:t}})}))})),n.on("message",(function(e){a({type:"ADD_MESSAGE",payload:e})})),n.on("startLecture",Object(y.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"START_LECTURE"}),e.next=3,k.a.get("".concat(w.URL.Server,"/api/streams/playToken?classroomId=").concat(t));case 3:n=e.sent,console.log(n),a({type:"GET_PLAY_TOKEN",payload:n});case 6:case"end":return e.stop()}}),e)})))),n.on("stopLecture",(function(){n.emit("leave"),a({type:"STOP_LECTURE"})})),n.on("userJoined",(function(e){e=ze(e,r().lecture.onlineUsers),a({type:"USER_JOINED",payload:e})})),n.on("userLeft",(function(e){a({type:"USER_LEFT",payload:e})})),n.on("sendPublishToken",(function(e){var t=e.token;a({type:"GET_PUBLISH_TOKEN",payload:{publishToken:t,currentStreamerId:r().auth.user._id}})})),n.on("streamerChanged",(function(e){var t=e.newStreamer;a({type:"ALLOW_USER_STREAM",payload:{currentStreamerId:t}})}))}},Je=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var o,c=function(){var a=Object(d.a)(o.value,2),n=a[0],r=a[1];if(t.includes(n))return"continue";if(e.some((function(e){return r.name===e.name}))){var c=[].concat(He),s=!0,i=!1,l=void 0;try{for(var u,m=e[Symbol.iterator]();!(s=(u=m.next()).done);s=!0){var p=u.value;r.name===p.name&&(p.color=c.pop(),t.push(e.indexOf(p)))}}catch(f){i=!0,l=f}finally{try{s||null==m.return||m.return()}finally{if(i)throw l}}r.color=c.pop()}else r.color=He[Math.floor(Math.random()*He.length)]},s=e.entries()[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)c()}catch(i){n=!0,r=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}return e},ze=function(e,t){var a=t.find((function(t){return e.name===t.name}));if(void 0!==a)do{e.color=He[Math.floor(Math.random()*He.length)],console.log(e.color,a.color)}while(e.color===a.color);else e.color=He[Math.floor(Math.random()*He.length)];return e},He=["#000","#ccc","#aaa","#0ec"],We=function(){return function(){var e=Object(y.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.emit("join");case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},Ye=a(771),Ke=a(772),$e=a(380),Qe=a.n($e),Xe=Object(m.b)((function(e){return{messages:e.lecture.messages,onlineUsers:e.lecture.onlineUsers,loading:e.lecture.loading,token:e.auth.token}}),{sendMessage:function(e){return function(t){n.emit("sendMessage",e)}},loadMessages:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/getlivechat"));case 2:n=t.sent,a({type:"GET_MESSAGES",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.messages,a=e.sendMessage,n=e.loadMessages,r=e.onlineUsers,s=e.loading,i=e.token,l=Object(u.h)().id,m=Object(o.useState)(""),p=Object(d.a)(m,2),f=p[0],E=p[1];Object(o.useEffect)((function(){n(l)}),[]);var g={name:"file",action:"".concat(w.URL.Server,"/api/files/upload/").concat(l),headers:{"x-auth-token":i},onChange:function(e){if("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var t;t=e.file.response.mimetype.startsWith("image")?"image":"file";var n=/([^\/]+$)/.exec(e.file.response.destination)[0],r="".concat(l,"/").concat(n,"/").concat(e.file.response.filename);a({text:r,type:t}),Ue.a.success("".concat(e.file.name," file uploaded successfully"))}else"error"===e.file.status&&Ue.a.error("".concat(e.file.name," file upload failed."))}},v=c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{type:"submit",onClick:function(){a(f)},icon:c.a.createElement(Ye.a,null)},"Send"),c.a.createElement(Me.a,g,c.a.createElement(b.a,null,c.a.createElement(Ke.a,null))));return c.a.createElement("div",{className:"chat-container"},c.a.createElement(Qe.a,{className:"chat-messages"},s?c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s}):t.map((function(e,t){var a=r.find((function(t){return e.sender===t._id}));if(void 0!==a)return c.a.createElement(Ge,{key:t,message:e.text,senderFirstName:a.name,color:a.color,type:e.type})}))),c.a.createElement(h.a,{onChange:function(e){return E({text:e.target.value,type:"text"})},addonAfter:v}))})),Ze=a(781),et=a(60),tt=a(76);function at(e){var t=function(){function e(t){Object(et.a)(this,e),this.streamId=t,this.totalBytesReceivedCount=0,this.totalBytesSent=0,this.packetsLost=0,this.fractionLost=0,this.startTime=0,this.lastBytesReceived=0,this.lastBytesSent=0,this.currentTimestamp=0,this.lastTime=0,this.timerId=0,this.firstByteSentCount=0,this.firstBytesReceivedCount=0}return Object(tt.a)(e,[{key:"averageOutgoingBitrate",get:function(){return Math.floor(8*(this.totalBytesSentCount-this.firstByteSentCount)/(this.currentTimestamp-this.startTime))}},{key:"averageIncomingBitrate",get:function(){return Math.floor(8*(this.totalBytesReceivedCount-this.firstBytesReceivedCount)/(this.currentTimestamp-this.startTime))}},{key:"currentOutgoingBitrate",get:function(){return Math.floor(8*(this.totalBytesSentCount-this.lastBytesSent)/(this.currentTimestamp-this.lastTime))}},{key:"currentIncomingBitrate",get:function(){return Math.floor(8*(this.totalBytesReceivedCount-this.lastBytesReceived)/(this.currentTimestamp-this.lastTime))}},{key:"currentTime",set:function(e){this.lastTime=this.currentTimestamp,this.currentTimestamp=e,0==this.startTime&&(this.startTime=e-1)}},{key:"totalBytesReceived",set:function(e){this.lastBytesReceived=this.totalBytesReceivedCount,this.totalBytesReceivedCount=e,0==this.firstBytesReceivedCount&&(this.firstBytesReceivedCount=e)}},{key:"totalBytesSent",set:function(e){this.lastBytesSent=this.totalBytesSentCount,this.totalBytesSentCount=e,0==this.firstByteSentCount&&(this.firstByteSentCount=e)}}]),e}(),a=this;for(var n in a.peerconnection_config=null,a.sdp_constraints=null,a.remotePeerConnection=new Array,a.remotePeerConnectionStats=new Array,a.remoteDescriptionSet=new Array,a.iceCandidateList=new Array,a.webSocketAdaptor=null,a.roomName=null,a.videoTrackSender=null,a.audioTrackSender=null,a.playStreamId=new Array,a.micGainNode=null,a.localStream=null,a.bandwidth=900,a.isMultiPeer=!1,a.multiPeerStreamId=null,a.isPlayMode=!1,a.debug=!1,a.publishMode="camera",a.candidateTypes=["udp","tcp"],a.desktopStream=null,a.camera_location="top",a.camera_margin=15,a.camera_percent=15,e)e.hasOwnProperty(n)&&(this[n]=e[n]);if(a.localVideo=document.getElementById(a.localVideoId),a.remoteVideo=document.getElementById(a.remoteVideoId),"camera"==a.mediaConstraints.video?a.publishMode="camera":"screen"==a.mediaConstraints.video?a.publishMode="screen":"screen+camera"==a.mediaConstraints.video&&(a.publishMode="screen+camera"),!("WebSocket"in window))return console.log("WebSocket not supported."),void a.callbackError("WebSocketNotSupported");if("undefined"==typeof navigator.mediaDevices&&0==a.isPlayMode)return console.log("Cannot open camera and mic because of unsecure context. Please Install SSL(https)"),void a.callbackError("UnsecureContext");if(this.switchDesktopwithCameraSource=function(e,t,n,r){a.desktopStream=e,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(r){var o=document.createElement("canvas"),c=o.getContext("2d"),s=document.createElement("video");s.srcObject=e,s.play();var i=document.createElement("video");i.srcObject=r,i.play();var l=o.captureStream(15);l.addTrack(n.getAudioTracks()[0]),null==a.localStream?(e.addTrack(n.getAudioTracks()[0]),a.gotStream(l)):a.switchDesktopSource(l,t,a.mediaConstraints,onended,null),setInterval((function(){o.width=s.videoWidth,o.height=s.videoHeight,c.drawImage(s,0,0,o.width,o.height);var e,t=s.videoWidth*(a.camera_percent/100),n=i.videoHeight/i.videoWidth*t,r=o.width-t-a.camera_margin;e="top"==a.camera_location?a.camera_margin:o.height-n-a.camera_margin,c.drawImage(i,r,e,t,n)}),66)})).catch((function(e){a.callbackError(e.name,e.message)}))},this.getUserMediaDetail=function(e,t,n,r){var o=n.getAudioTracks();if(o.length>0&&n.removeTrack(o[0]),n.getVideoTracks()[0].onended=function(t){a.callback("screen_share_stopped"),a.switchVideoSource(r,e,null,!0)},"undefined"!=t&&0!=t){var c={audio:t};console.log(c),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){"screen"==a.publishMode?(console.log(r),n.addTrack(t.getAudioTracks()[0]),a.switchDesktopSource(n,r,e,onended,!0)):"screen+camera"==a.publishMode?a.switchDesktopwithCameraSource(n,r,t,onended):(n.addTrack(t.getAudioTracks()[0]),a.gotStream(n))})).catch((function(e){console.log("Hey! error"),a.callbackError(e.name,e.message)}))}else console.log("I'm here..."),navigator.mediaDevices.getUserMedia(c).then((function(e){n.addTrack(e.getAudioTracks()[0]),a.gotStream(n)}))},this.getUserMedia=function(e,t,n){"screen+camera"==a.publishMode||"screen"==a.publishMode?(console.log(e),navigator.mediaDevices.getDisplayMedia(e).then((function(r){a.getUserMediaDetail(e,t,r,n)})).catch((function(e){if("NotAllowedError"===e.name)if(console.debug("Permission denied error"),a.callbackError("ScreenSharePermissionDenied"),null==a.localStream){a.openStream({video:!0,audio:!0})}else a.switchVideoCapture(n);else a.callbackError(e.name,e.message)}))):navigator.mediaDevices.getUserMedia(e).then((function(n){a.getUserMediaDetail(e,t,n)})).catch((function(e){a.callbackError(e.name,e.message)}))},this.openStream=function(e){a.mediaConstraints=e;var t=!1;"undefined"!=typeof e.audio&&0!=e.audio&&(t=e.audio),"undefined"!=typeof e.video?a.getUserMedia(e,t):(console.error("MediaConstraint video is not defined"),a.callbackError("media_constraint_video_not_defined"))},this.closeStream=function(){a.localStream.getVideoTracks().forEach((function(e){e.onended=null,e.stop()})),a.localStream.getAudioTracks().forEach((function(e){e.onended=null,e.stop()}))},this.checkBrowserScreenShareSupported=function(){window.addEventListener("message",(function e(t){(navigator.mediaDevices.getDisplayMedia||navigator.getDisplayMedia)&&(a.callback("browser_screen_share_supported"),window.removeEventListener("message",e))}),!1),window.postMessage("are-you-there","*")},a.checkBrowserScreenShareSupported(),this.isPlayMode||"undefined"==typeof a.mediaConstraints||null!=this.localStream)null!=a.webSocketAdaptor&&0!=a.webSocketAdaptor.isConnected()||(a.webSocketAdaptor=new o);else if("undefined"!=typeof a.mediaConstraints.video&&0!=a.mediaConstraints.video)a.mediaConstraints.audio.mandatory?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){navigator.mediaDevices.getUserMedia(a.mediaConstraints).then((function(t){var n=new AudioContext,r=n.createGain();r.gain.value=1;var o=n.createMediaStreamDestination();n.createMediaStreamSource(t).connect(r),a.micGainNode=n.createGain(),a.micGainNode.gain.value=1,n.createMediaStreamSource(e).connect(a.micGainNode),r.connect(o),a.micGainNode.connect(o),t.removeTrack(t.getAudioTracks()[0]),o.stream.getAudioTracks().forEach((function(e){t.addTrack(e)})),console.debug("Running gotStream"),a.gotStream(t)})).catch((function(e){a.callbackError(e.name,e.message)}))})).catch((function(e){a.callbackError(e.name,e.message)})):a.openStream(a.mediaConstraints,a.mode);else{var r={audio:a.mediaConstraints.audio};navigator.mediaDevices.getUserMedia(r).then((function(e){a.gotStream(e)})).catch((function(e){a.callbackError(e.name,e.message)}))}function o(){var e=new WebSocket(a.websocket_url),t=!1,n=-1,r=function(){-1!=n&&(a.debug&&console.debug("Clearing ping message timer"),clearInterval(n),n=-1)};this.close=function(){e.close()},e.onopen=function(){a.debug&&console.log("websocket connected"),n=setInterval((function(){e.send(JSON.stringify({command:"ping"}))}),3e3),t=!0,a.callback("initialized")},this.send=function(t){0!=e.readyState&&2!=e.readyState&&3!=e.readyState?(e.send(t),console.log("sent message:"+t)):a.callbackError("WebSocketNotConnected")},this.isConnected=function(){return t},e.onmessage=function(e){var t=JSON.parse(e.data);"start"==t.command?(a.debug&&console.debug("received start command"),a.startPublishing(t.streamId)):"takeCandidate"==t.command?(a.debug&&(console.debug("received ice candidate for stream id "+t.streamId),console.debug(t.candidate)),a.takeCandidate(t.streamId,t.label,t.candidate)):"takeConfiguration"==t.command?(a.debug&&console.log("received remote description type for stream id: "+t.streamId+" type: "+t.type),a.takeConfiguration(t.streamId,t.sdp,t.type)):"stop"==t.command?(console.debug("Stop command received"),a.closePeerConnection(t.streamId)):"error"==t.command?a.callbackError(t.definition):"notification"==t.command?(a.callback(t.definition,t),"play_finished"!=t.definition&&"publish_finished"!=t.definition||a.closePeerConnection(t.streamId)):"streamInformation"==t.command?a.callback(t.command,t):"pong"==t.command?a.callback(t.command):"trackList"==t.command?a.callback(t.command,t):"connectWithNewId"==t.command?(a.multiPeerStreamId=t.streamId,a.join(t.streamId)):"peerMessageCommand"==t.command&&a.callback(t.command,t)},e.onerror=function(e){console.log(" error occured: "+JSON.stringify(e)),r(),a.callbackError(e)},e.onclose=function(e){t=!1,console.log("connection closed."),r(),a.callback("closed",e)}}this.enableMicInMixedAudio=function(e){null!=a.micGainNode&&(a.micGainNode.gain.value=e?1:0)},this.publish=function(e,t){var n={command:"publish",streamId:e,token:t,video:a.localStream.getVideoTracks().length>0,audio:a.localStream.getAudioTracks().length>0};a.webSocketAdaptor.send(JSON.stringify(n))},this.joinRoom=function(e,t){a.roomName=e;var n={command:"joinRoom",room:e,streamId:t};a.webSocketAdaptor.send(JSON.stringify(n))},this.play=function(e,t,n,r){a.playStreamId.push(e);var o={command:"play",streamId:e,token:t,room:n,trackList:r};a.webSocketAdaptor.send(JSON.stringify(o))},this.stop=function(e){a.closePeerConnection(e);var t={command:"stop",streamId:e};a.webSocketAdaptor.send(JSON.stringify(t))},this.join=function(e){var t={command:"join",streamId:e,multiPeer:a.isMultiPeer&&null==a.multiPeerStreamId,mode:a.isPlayMode?"play":"both"};a.webSocketAdaptor.send(JSON.stringify(t))},this.leaveFromRoom=function(e){a.roomName=e;var t={command:"leaveFromRoom",room:e};console.log("leave request is sent for "+e),a.webSocketAdaptor.send(JSON.stringify(t))},this.leave=function(e){var t={command:"leave",streamId:a.isMultiPeer&&null!=a.multiPeerStreamId?a.multiPeerStreamId:e};a.webSocketAdaptor.send(JSON.stringify(t)),a.closePeerConnection(e),a.multiPeerStreamId=null},this.getStreamInfo=function(e){var t={command:"getStreamInfo",streamId:e};this.webSocketAdaptor.send(JSON.stringify(t))},this.enableTrack=function(e,t,a){var n={command:"enableTrack",streamId:e,trackId:t,enabled:a};this.webSocketAdaptor.send(JSON.stringify(n))},this.getTracks=function(e,t){a.playStreamId.push(e);var n={command:"getTrackList",streamId:e,token:t};a.webSocketAdaptor.send(JSON.stringify(n))},this.gotStream=function(e){a.localStream=e,a.localVideo.srcObject=e,null!=a.webSocketAdaptor&&0!=a.webSocketAdaptor.isConnected()||(a.webSocketAdaptor=new o)},this.switchVideoCapture=function(e){a.publishMode="camera",a.switchVideoSource(e,a.mediaConstraints,null,!0)},this.switchDesktopCapture=function(e){a.publishMode="screen";var t=!1;"undefined"!=typeof this.mediaConstraints.audio&&0!=this.mediaConstraints.audio&&(t=this.mediaConstraints.audio),a.getUserMedia(a.mediaConstraints,t,e)},this.switchDesktopCaptureWithCamera=function(e){a.publishMode="screen+camera";var t=!1;"undefined"!=typeof this.mediaConstraints.audio&&0!=this.mediaConstraints.audio&&(t=this.mediaConstraints.audio),a.getUserMedia(this.mediaConstraints,t)},a.arrangeStreams=function(e,t,n){console.log("0"),n&&null!=a.desktopStream&&a.desktopStream.getVideoTracks()[0].stop(),console.log("1");var r=a.localStream.getVideoTracks()[0];console.log("2"),a.localStream.removeTrack(r),console.log("3"),r.stop(),console.log("4"),a.localStream.addTrack(e.getVideoTracks()[0]),console.log("5"),a.localVideo.srcObject=a.localStream,console.log("6"),null!=t&&(e.getVideoTracks()[0].onended=function(e){t(e)})},this.switchVideoSource=function(e,t,n,r){navigator.mediaDevices.getUserMedia(t).then((function(t){null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].getSenders().find((function(e){return"video"==e.track.kind})).replaceTrack(t.getVideoTracks()[0]).then((function(e){a.arrangeStreams(t,n,r)})).catch((function(e){console.log(e.name)})):a.arrangeStreams(t,n,r)})).catch((function(e){a.callbackError(e.name)}))},this.switchDesktopSource=function(e,t,n,r,o){a.arrangeStreams(e,r,o)},this.onTrack=function(e,t){if(console.log("onTrack"),null!=a.remoteVideo)a.remoteVideo.srcObject!==e.streams[0]&&(a.remoteVideo.srcObject=e.streams[0],console.log("Received remote stream"));else{var n={stream:e.streams[0],track:e.track,streamId:t};a.callback("newStreamAvailable",n)}},this.iceCandidateReceived=function(e,t){if(e.candidate){if(a.candidateTypes.includes(e.candidate.protocol)){var n={command:"takeCandidate",streamId:t,label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate};a.debug&&(console.log("sending ice candiate for stream Id "+t),console.log(JSON.stringify(e.candidate)))}else a.debug&&console.log("Candidate's protocol("+e.candidate.protocol+") is not supported. Supported protocols: "+a.candidateTypes);a.webSocketAdaptor.send(JSON.stringify(n))}},this.initDataChannel=function(e,t){t.onerror=function(t){console.log("Data Channel Error:",t);var n={streamId:e,error:t};a.callbackError("data_channel_error",n)},t.onmessage=function(t){var n={streamId:e,event:t};a.callback("data_received",n)},t.onopen=function(){a.remotePeerConnection[e].dataChannel=t,console.log("Data channel is opened"),a.callback("data_channel_opened",e)},t.onclose=function(){console.log("Data channel is closed"),a.callback("data_channel_closed",e)}},this.initPeerConnection=function(e){if(null==a.remotePeerConnection[e]){var t=e;if(console.log("stream id in init peer connection: "+e+" close stream id: "+t),a.remotePeerConnection[e]=new RTCPeerConnection(a.peerconnection_config),a.remoteDescriptionSet[e]=!1,a.iceCandidateList[e]=new Array,a.playStreamId.includes(e)||null!=a.localStream&&a.remotePeerConnection[e].addStream(a.localStream),a.remotePeerConnection[e].onicecandidate=function(e){a.iceCandidateReceived(e,t)},a.remotePeerConnection[e].ontrack=function(e){a.onTrack(e,t)},0==a.isPlayMode){var n=a.remotePeerConnection[e].createDataChannel(e,{ordered:!0});a.initDataChannel(e,n)}else a.remotePeerConnection[e].ondatachannel=function(t){a.initDataChannel(e,t.channel)};a.remotePeerConnection[e].oniceconnectionstatechange=function(t){var n={state:a.remotePeerConnection[e].iceConnectionState,streamId:e};a.callback("ice_connection_state_changed",n),a.isPlayMode||"connected"==a.remotePeerConnection[e].iceConnectionState&&a.changeBandwidth(a.bandwidth,e).then((function(){console.log("Bandwidth is changed to "+a.bandwidth)})).catch((function(e){return console.error(e)}))}}},this.closePeerConnection=function(e){if(null!=a.remotePeerConnection[e]&&"closed"!=a.remotePeerConnection[e].signalingState){a.remotePeerConnection[e].close(),a.remotePeerConnection[e]=null,delete a.remotePeerConnection[e];var t=a.playStreamId.indexOf(e);-1!=t&&a.playStreamId.splice(t,1)}null!=a.remotePeerConnectionStats[e]&&(clearInterval(a.remotePeerConnectionStats[e].timerId),delete a.remotePeerConnectionStats[e])},this.signallingState=function(e){return null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].signalingState:null},this.iceConnectionState=function(e){return null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].iceConnectionState:null},this.gotDescription=function(e,t){a.remotePeerConnection[t].setLocalDescription(e).then((function(n){console.debug("Set local description successfully for stream Id "+t);var r={command:"takeConfiguration",streamId:t,type:e.type,sdp:e.sdp};a.debug&&(console.debug("local sdp: "),console.debug(e.sdp)),a.webSocketAdaptor.send(JSON.stringify(r))})).catch((function(e){console.error("Cannot set local description. Error is: "+e)}))},this.turnOffLocalCamera=function(){null!=a.remotePeerConnection?a.localStream.getVideoTracks()[0].enabled=!1:this.callbackError("NoActiveConnection")},this.turnOnLocalCamera=function(){null!=a.remotePeerConnection?a.localStream.getVideoTracks()[0].enabled=!0:this.callbackError("NoActiveConnection")},this.muteLocalMic=function(){null!=a.remotePeerConnection?a.localStream.getAudioTracks()[0].enabled=!1:this.callbackError("NoActiveConnection")},this.unmuteLocalMic=function(){null!=a.remotePeerConnection?a.localStream.getAudioTracks()[0].enabled=!0:this.callbackError("NoActiveConnection")},this.takeConfiguration=function(e,t,n){var r=e,o=n,c=t;a.initPeerConnection(r),a.remotePeerConnection[r].setRemoteDescription(new RTCSessionDescription({sdp:c,type:o})).then((function(e){a.debug&&(console.debug("set remote description is succesfull with response: "+e+" for stream : "+r+" and type: "+o),console.debug(c)),a.remoteDescriptionSet[r]=!0;var t=a.iceCandidateList[r].length;console.debug("Ice candidate list size to be added: "+t);for(var n=0;n<t;n++)a.addIceCandidate(r,a.iceCandidateList[r][n]);a.iceCandidateList[r]=[],"offer"==o&&(console.log("try to create answer for stream id: "+r),a.remotePeerConnection[r].createAnswer(a.sdp_constraints).then((function(e){console.log("created answer for stream id: "+r),a.gotDescription(e,r)})).catch((function(e){console.error("create answer error :"+e)})))})).catch((function(e){a.debug&&console.error("set remote description is failed with error: "+e),(e.toString().indexOf("InvalidAccessError")>-1||e.toString().indexOf("setRemoteDescription")>-1)&&a.callbackError("notSetRemoteDescription")}))},this.takeCandidate=function(e,t,n){var r=e,o=new RTCIceCandidate({sdpMLineIndex:t,candidate:n});a.initPeerConnection(r),1==a.remoteDescriptionSet[r]?a.addIceCandidate(r,o):(console.debug("Ice candidate is added to list because remote description is not set yet"),a.iceCandidateList[r].push(o))},this.addIceCandidate=function(e,t){a.candidateTypes.includes(t.protocol)?a.remotePeerConnection[e].addIceCandidate(t).then((function(t){a.debug&&console.log("Candidate is added for stream "+e)})).catch((function(a){console.error("ice candiate cannot be added for stream id: "+e+" error is: "+a),console.error(t)})):a.debug&&console.log("Candidate's protocol("+t.protocol+") is not supported. Supported protocols:"+a.candidateTypes)},this.startPublishing=function(e){var t=e;a.initPeerConnection(t),a.remotePeerConnection[t].createOffer(a.sdp_constraints).then((function(e){a.gotDescription(e,t)})).catch((function(e){console.error("create offer error for stream id: "+t+" error: "+e)}))},this.getVideoSender=function(e){for(var t=null,n=a.remotePeerConnection[e].getSenders(),r=0;r<n.length;r++)if(null!=n[r].track&&"video"==n[r].track.kind){t=n[r];break}return t},this.changeBandwidth=function(e,t){var n="",r=a.getVideoSender(t);if(null!=r){var o=r.getParameters();return o.encodings||(o.encodings=[{}]),"unlimited"===e?delete o.encodings[0].maxBitrate:o.encodings[0].maxBitrate=1e3*e,r.setParameters(o)}return n="Video sender not found to change bandwidth",Promise.reject(n)},this.getStats=function(e){a.remotePeerConnection[e].getStats(null).then((function(t){var n=0,r=0,o=0,c=0,s=0;t.forEach((function(e){"inbound-rtp"==e.type?(n+=e.bytesReceived,r+=e.packetsLost,o+=e.fractionLost,c=e.timestamp):"outbound-rtp"==e.type&&(s+=e.bytesSent,c=e.timestamp)})),a.remotePeerConnectionStats[e].totalBytesReceived=n,a.remotePeerConnectionStats[e].packetsLost=r,a.remotePeerConnectionStats[e].fractionLost=o,a.remotePeerConnectionStats[e].currentTime=c,a.remotePeerConnectionStats[e].totalBytesSent=s,a.callback("updated_stats",a.remotePeerConnectionStats[e])}))},this.enableStats=function(e){a.remotePeerConnectionStats[e]=new t(e),a.remotePeerConnectionStats[e].timerId=setInterval((function(){a.getStats(e)}),5e3)},this.closeWebSocket=function(){for(var e in a.remotePeerConnection)a.remotePeerConnection[e].close();a.remotePeerConnection=new Array,a.webSocketAdaptor.close()},this.peerMessage=function(e,t,n){var r={command:"peerMessageCommand",streamId:e,definition:t,data:n};a.webSocketAdaptor.send(JSON.stringify(r))},this.sendData=function(e,t){a.remotePeerConnection[e].dataChannel.send(t)}}var nt=function(e,t){var a=t;r.publish(a,e)},rt=a(797),ot=a(109),ct=a(773),st=a(774),it=a(775),lt=a(776),ut=a(777),mt=a(778),dt=Object(m.b)((function(e){return{streamState:e.stream,publishToken:e.lecture.publishToken}}),{initWebrtc:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n,o,c,s,i,l,u,m,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(e));case 3:n=t.sent,o="wss://".concat(window.location.hostname,":5443/").concat(n.data.mediaServerApp,"/websocket"),r=new at({websocket_url:o,mediaConstraints:{audio:!0,video:!0},peerconnection_config:null,sdp_constraints:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},localVideoId:"localVideo",debug:!0,callback:function(e,t){"initialized"==e?(console.log("initialized"),a({type:"CONNECTION_SUCCESS"})):"publish_started"==e?(console.log("publish started"),a({type:"START_SHARING_SUCCESS"})):"publish_finished"==e?(console.log("publish finished"),a({type:"STOP_SHARING"})):"closed"==e?("undefined"!=typeof t&&console.log("Connecton closed: "+JSON.stringify(t)),a({type:"CONNECTION_CLOSE"})):"refreshConnection"==e?(a({type:"START_SHARING"}),nt()):"updated_stats"==e&&console.log("Average outgoing bitrate "+t.averageOutgoingBitrate+" kbits/sec Current outgoing bitrate: "+t.currentOutgoingBitrate+" kbits/sec")},callbackError:function(e,t){console.log("error callback: "+JSON.stringify(e));var n=JSON.stringify(e);"undefined"!=typeof t&&(n=t),-1!=e.indexOf("NotFoundError")?n="Camera or mic are not found or not allowed in your device.":-1!=e.indexOf("NotReadableError")||-1!=e.indexOf("TrackStartError")?n="Camera or mic is being used by some other program. Please, make sure and try again.":-1!=e.indexOf("OverconstrainedError")||-1!=e.indexOf("ConstraintNotSatisfiedError")?n="No device was found for audio/video.":-1!=e.indexOf("NotAllowedError")||-1!=e.indexOf("PermissionDeniedError")?n="Please, allow the browser to access camera and mic.":-1!=e.indexOf("TypeError")?n="Connection error.":-1!=e.indexOf("ScreenSharePermissionDenied")?n="Please, allow screen sharing in the browser.":-1!=e.indexOf("WebSocketNotConnected")&&(n="Connection error.",a({type:"CONNECTION_CLOSE"})),alert(n)}}),t.next=33;break;case 8:if(t.prev=8,t.t0=t.catch(0),!t.t0.response){t.next=32;break}if(!(c=t.t0.response.data.errors)){t.next=32;break}for(s=!0,i=!1,l=void 0,t.prev=16,u=c[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)d=m.value,a(O(d.msg,"error",5e3));t.next=24;break;case 20:t.prev=20,t.t1=t.catch(16),i=!0,l=t.t1;case 24:t.prev=24,t.prev=25,s||null==u.return||u.return();case 27:if(t.prev=27,!i){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:console.log("Error",t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,8],[16,20,24,32],[25,,27,31]])})));return function(e){return t.apply(this,arguments)}}()},startPublishingAction:function(e,t){return function(a){a({type:"START_SHARING"}),nt(e,t)}},stopPublishing:function(e){return function(t){r.stop(e),t({type:"STOP_SHARING"})}},toggleMic:function(){return function(e,t){t().stream.micMuted?r.unmuteLocalMic():r.muteLocalMic(),e({type:"TOGGLE_MIC"})}},switchMode:function(e,t){return function(a){switch(console.log(t,e),t){case"webcam":r.turnOnLocalCamera(),r.switchVideoCapture(e);break;case"screen":r.switchDesktopCapture(e);break;case"audio":r.turnOffLocalCamera()}}}})((function(e){var t=e.streamState,a=e.publishToken,n=e.initWebrtc,r=e.startPublishingAction,s=e.stopPublishing,i=e.toggleMic,l=e.switchMode,m=Object(u.h)().id;Object(o.useEffect)((function(){n(m)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(rt.a.Group,{defaultValue:"webcam",onChange:function(e){l(m,e.target.value)}},c.a.createElement(rt.a.Button,{value:"webcam"},c.a.createElement(ge.a,null)," Webcam"),c.a.createElement(rt.a.Button,{value:"screen"},c.a.createElement(ct.a,null)," Screen"),c.a.createElement(rt.a.Button,{value:"audio"},c.a.createElement(st.a,null)," Audio Only")),t.isSharing?c.a.createElement(b.a,{onClick:function(){s(m)},icon:c.a.createElement(lt.a,null),type:"danger"},"Stop Sharing"):c.a.createElement(b.a,{onClick:function(){r(a,m)},disabled:!t.webrtcConnected,icon:c.a.createElement(it.a,null),type:"primary"},"Start Sharing"),c.a.createElement(ot.a,{title:t.micMuted?"Unmute mic":"Mute mic"},c.a.createElement(b.a,{onClick:i,shape:"circle",icon:t.micMuted?c.a.createElement(ut.a,null):c.a.createElement(mt.a,null)})))})),pt=a(210),ft=a(156),ht=a(211),Et=a(383),bt=a.n(Et),gt=function(e){function t(e){var a;return Object(et.a)(this,t),(a=Object(pt.a)(this,Object(ft.a)(t).call(this,e))).state={},a}return Object(ht.a)(t,e),Object(tt.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=e.source!=this.props.source;return this.props=e,this.state=t,a&&this.change(e.source),!1}},{key:"componentDidMount",value:function(){this.change(this.props.source)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"destroyPlayer",value:function(){this.player&&this.player.destroy(),this.player=null}},{key:"change",value:function(e){this.player&&this.destroyPlayer(),console.log(e),this.player=new bt.a.Player({parent:this.refs.player,source:e,width:"100%",height:"100%",hlsjsConfig:{enableWorker:!0}})}},{key:"render",value:function(){return c.a.createElement("div",{className:"clappr-vid",ref:"player"})}}]),t}(c.a.Component),vt=a(779),yt=a(780),St=a(384),kt=function(){var e=Object(o.useState)(1),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(o.useRef)(null),s=Object(St.a)({file:"/TM355_Session_1.pdf",page:a,canvasRef:r}),i=s.pdfDocument;s.pdfPage;return c.a.createElement("div",null,!i&&c.a.createElement("span",null,"Loading..."),c.a.createElement("canvas",{className:"slides-canvas",ref:r}),Boolean(i&&i.numPages)&&c.a.createElement("nav",null,c.a.createElement("ul",{className:"pager"},c.a.createElement("li",{className:"previous"},c.a.createElement(b.a,{shape:"circle",disabled:1===a,onClick:function(){return n(a-1)},icon:c.a.createElement(vt.a,null)})),"".concat(a,"/").concat(i.numPages),c.a.createElement("li",{className:"next"},c.a.createElement(b.a,{shape:"circle",disabled:a===i.numPages,onClick:function(){return n(a+1)},icon:c.a.createElement(yt.a,null)})))))},Tt=Object(m.b)((function(e){return{token:e.auth.token,lectureStarted:e.lecture.lectureStarted,onlineUsers:e.lecture.onlineUsers,streamState:e.stream,playToken:e.lecture.playToken,currentStreamerId:e.lecture.currentStreamerId,publishToken:e.lecture.publishToken}}),{initSocket:qe,joinClassroom:We})((function(e){var t=e.initSocket,a=e.joinClassroom,n=e.token,r=e.lectureStarted,s=e.streamState,i=(e.playToken,e.publishToken),l=e.onlineUsers,m=e.currentStreamerId,d="LiveApp",f=Object(u.h)().id;return Object(o.useEffect)((function(){t(n,f)}),[n,f]),Object(o.useEffect)((function(){r&&a()}),[r,f]),Object(o.useEffect)((function(){function e(){return(e=Object(y.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(f),{headers:{"x-auth-token":n}});case 3:t=e.sent,a=t.data,console.log(a),d=a.mediaServerApp,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(p.a.Content,null,r?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ne.a,{justify:"space-around",className:"classroom"},c.a.createElement(Re.a,{span:6},c.a.createElement(Xe,null),c.a.createElement("video",{id:"localVideo",className:s.isSharing?"clappr-vid":"hide",autoPlay:!0,muted:!0}),!s.isSharing&&d?c.a.createElement(gt,{className:"play-vid",source:"https://".concat(window.location.hostname,":5443/").concat(d,"/streams/").concat(f,".m3u8")}):""),c.a.createElement(Re.a,{span:11},c.a.createElement(kt,null)),c.a.createElement(Re.a,{span:5},c.a.createElement(F.a,{bordered:!0,header:i?c.a.createElement(dt,null):"",dataSource:l,renderItem:function(e){return c.a.createElement(F.a.Item,{key:e._id,actions:[c.a.createElement("a",{key:"options"},"...")]},c.a.createElement(F.a.Item.Meta,{avatar:c.a.createElement(G.a,{className:m===e._id?"currentStreamer":"",style:{backgroundColor:e.color,verticalAlign:"middle"},size:"large"},e.name),title:e.name,description:e.kind}))}})))):c.a.createElement(R.a,{icon:c.a.createElement(Ze.a,null),title:"The lecture has not started yet.",extra:c.a.createElement(b.a,{type:"primary"},"Do Something")}))})),Ct=a(793),Ot=a(782),wt=a(783),_t=Object(m.b)((function(e){return{token:e.auth.token,lectureStarted:e.lecture.lectureStarted,onlineUsers:e.lecture.onlineUsers,streamState:e.stream,playToken:e.lecture.playToken,currentStreamerId:e.lecture.currentStreamerId}}),{initSocket:qe,joinClassroom:We,startLecture:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a,r){var o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.post("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/start"));case 3:return n.emit("startLecture"),t.next=6,k.a.get("".concat(w.URL.Server,"/api/streams/publishToken?classroomId=").concat(e));case 6:o=t.sent,a({type:"GET_PUBLISH_TOKEN",payload:{publishToken:o,currentStreamerId:r().auth.user._id}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Error starting the lecture",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()},stopLecture:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/stop"));case 2:n.emit("stopLecture");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.initSocket,a=e.joinClassroom,n=e.token,r=e.lectureStarted,s=e.startLecture,i=e.stopLecture,l=e.onlineUsers,m=e.streamState,d=(e.playToken,e.currentStreamerId),f="LiveApp",h=Object(u.h)().id;Object(o.useEffect)((function(){t(n,h)}),[n,h]),Object(o.useEffect)((function(){r&&a()}),[r,h]),Object(o.useEffect)((function(){function e(){return(e=Object(y.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(h),{headers:{"x-auth-token":n}});case 3:t=e.sent,a=t.data,console.log(a),f=a.mediaServerApp,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var E=c.a.createElement(X.a,null,c.a.createElement(X.a.Item,{key:"0"},c.a.createElement(Z.a,null),"Allow to speak"),c.a.createElement(X.a.Item,{key:"1"},c.a.createElement(Ot.a,null),"Ban from chat"));return c.a.createElement(p.a.Content,null,r?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ne.a,{justify:"space-around",className:"classroom"},c.a.createElement(Re.a,{span:6},c.a.createElement(Xe,null),c.a.createElement("video",{id:"localVideo",className:m.isSharing?"clappr-vid":"hide",autoPlay:!0,muted:!0,playsInline:!0}),!m.isSharing&&f?c.a.createElement(gt,{className:"play-vid",source:"https://".concat(window.location.hostname,":5443/").concat(f,"/streams/").concat(h,".m3u8")}):""),c.a.createElement(Re.a,{span:11},c.a.createElement(kt,null)),c.a.createElement(Re.a,{span:5},c.a.createElement(b.a,{type:"danger",onClick:function(){i(h)}},"Stop Lecture"),c.a.createElement(F.a,{bordered:!0,header:c.a.createElement(dt,null),dataSource:l,renderItem:function(e){return c.a.createElement(F.a.Item,{key:e._id,actions:[c.a.createElement(Ct.a,{overlay:E,trigger:["click"]},c.a.createElement("a",{onClick:function(e){return e.preventDefault()}},c.a.createElement(wt.a,null)))]},c.a.createElement(F.a.Item.Meta,{avatar:c.a.createElement(G.a,{className:d===e._id?"currentStreamer":"",style:{backgroundColor:e.color,verticalAlign:"middle"},size:"large"},e.name),title:e.name,description:e.kind}))}})))):c.a.createElement(R.a,{icon:c.a.createElement(Ze.a,null),title:"The lecture has not started yet.",extra:c.a.createElement(b.a,{type:"primary",onClick:function(){s(h)}},"Start a Lecture")}))})),xt=P.a.create({name:"login-as-guest"})((function(e){var t=e.form,a=e.loginAsGuest,n=e.isAuthenticated,r=e.user,s=function(){var e=Object(y.a)(v.a.mark((function e(n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.validateFields((function(e,t){e||a(t.username)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(n&&r)return c.a.createElement(u.a,{to:"/dashboard"});var i=t.getFieldDecorator;return c.a.createElement(o.Fragment,null,c.a.createElement("h2",null,"Login as a guest"),c.a.createElement(P.a,{onSubmit:s,className:"login-form"},c.a.createElement(P.a.Item,null,i("username",{rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),c.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))})),It=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{loginAsGuest:function(e){return function(){var t=Object(y.a)(v.a.mark((function t(a){var n,r,o,c,s,i,l,u,m,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},r=JSON.stringify({name:e}),t.prev=2,t.next=5,k.a.post(_+"/api/auth/guest",r,{headers:n});case 5:o=t.sent,a({type:"LOGIN_SUCCESS",payload:o.data}),t.next=33;break;case 9:if(t.prev=9,t.t0=t.catch(2),!(c=t.t0.response.data.errors)){t.next=32;break}for(s=!0,i=!1,l=void 0,t.prev=16,u=c[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)d=m.value,a(O(d.msg,"error",1e5));t.next=24;break;case 20:t.prev=20,t.t1=t.catch(16),i=!0,l=t.t1;case 24:t.prev=24,t.prev=25,s||null==u.return||u.return();case 27:if(t.prev=27,!i){t.next=30;break}throw l;case 30:return t.finish(27);case 31:return t.finish(24);case 32:a({type:"LOGIN_FAIL"});case 33:case"end":return t.stop()}}),t,null,[[2,9],[16,20,24,32],[25,,27,31]])})));return function(e){return t.apply(this,arguments)}}()}})(xt),At=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.isAuthenticated,a=e.user,n=t?c.a.createElement(o.Fragment,null,c.a.createElement("h3",null,"welcome ",a.name," in Swift Course Home Page as a ",a.kind),c.a.createElement(l.b,{to:"/dashboard"},"Go to dashboard")):c.a.createElement(o.Fragment,null,c.a.createElement("h3",null,"welcome in Swift Course Home Page"),c.a.createElement("p",{style:{color:"#000000"}},"SiwftCourse, a web application that uses the BitTorrent protocol and other features that make it cost less bandwidth. The system will take advantage of the students\u2019 upload bandwidth to support the stream. To solve the timing of classes problem, the lecture will be recorded so students can still watch it after it ends for a period of 24 hours. Furthermore, there will be no need for a mobile app because the website will be responsive (supports all screen sizes)."),c.a.createElement("div",null,c.a.createElement(l.b,{to:"/register/student"},"join us"),"\xa0\xa0\xa0\xa0",c.a.createElement(l.b,{to:"/register/tutor"},"be a tutor in our site"),"\xa0\xa0\xa0\xa0",c.a.createElement(l.b,{to:"/login"},"Already have an account")));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Swift Course"),c.a.createElement("h2",null,"A Fast and Affordable Online Classroom System"),n)})),Lt=Object(m.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteAdmin:function(e,t,a){return function(){var n=Object(y.a)(v.a.mark((function n(r){var o,c,s,i,l,u,m,d;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_ADMIN"}),n.next=5,k.a.delete(V+"/api/administrators/".concat(e),o);case 5:setTimeout((function(){r({type:"DELETE_ADMIN_SUCCESS"}),t.push(a)}),2e3),r(x()),n.next=34;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),!(c=n.t0.response.data.errors)){n.next=33;break}for(s=!0,i=!1,l=void 0,n.prev=17,u=c[Symbol.iterator]();!(s=(m=u.next()).done);s=!0)d=m.value,r(O(d.msg,"error",1e5));n.next=25;break;case 21:n.prev=21,n.t1=n.catch(17),i=!0,l=n.t1;case 25:n.prev=25,n.prev=26,s||null==u.return||u.return();case 28:if(n.prev=28,!i){n.next=31;break}throw l;case 31:return n.finish(28);case 32:return n.finish(25);case 33:r({type:"DELETE_ADMIN_FAIL"});case 34:case"end":return n.stop()}}),n,null,[[1,9],[17,21,25,33],[26,,28,32]])})));return function(e){return n.apply(this,arguments)}}()},editAdmin:function(e,t,a){var n=e.name,r=e.email,o=e.password;return(function(){var e=Object(y.a)(v.a.mark((function e(c){var s,i,l,u,m,d,p,f,h;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json"}},i=JSON.stringify({name:n,email:r,password:o}),e.prev=2,c({type:"EDIT_ADMIN"}),e.next=6,k.a.put(V+"/api/administrators/",i,s);case 6:setTimeout((function(){c({type:"EDIT_ADMIN_SUCCESS"}),t.push(a)}),2e3),c(x()),e.next=35;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),!(l=e.t0.response.data.errors)){e.next=34;break}for(u=!0,m=!1,d=void 0,e.prev=18,p=l[Symbol.iterator]();!(u=(f=p.next()).done);u=!0)h=f.value,c(O(h.msg,"error",1e5));e.next=26;break;case 22:e.prev=22,e.t1=e.catch(18),m=!0,d=e.t1;case 26:e.prev=26,e.prev=27,u||null==p.return||p.return();case 29:if(e.prev=29,!m){e.next=32;break}throw d;case 32:return e.finish(29);case 33:return e.finish(26);case 34:c({type:"EDIT_ADMIN_FAIL"});case 35:case"end":return e.stop()}}),e,null,[[2,10],[18,22,26,34],[27,,29,33]])})));return function(t){return e.apply(this,arguments)}}())}})((function(e){var t,a=e.deleteAdmin,n=e.editAdmin,r=e.user,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=r)&&m.setFieldsValue({email:t.email,name:t.name})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit administrator Profile"),c.a.createElement("p",null,"Edit your information."),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,i,"/dashboard")}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Edit your information"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(p,i,"/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete your account")))))})),jt=Object(m.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteTutor:J,editTutor:q})((function(e){var t,a=e.deleteTutor,n=e.editTutor,r=e.user,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=r)&&m.setFieldsValue({email:t.email,name:t.name})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit Tutor Profile"),c.a.createElement("p",null,"Edit your information."),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,i,"/dashboard")}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Edit your information"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(p,i,"/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete your account")))))})),Pt=Object(m.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteStudent:H,editStudent:z})((function(e){var t,a=e.deleteStudent,n=e.editStudent,r=e.user,s=e.loading,i=Object(u.g)(),l=f.a.useForm(),m=Object(d.a)(l,1)[0],p=Object(u.h)().id;Object(o.useEffect)((function(){(t=r)&&m.setFieldsValue({email:t.email,name:t.name})}));return c.a.createElement(o.Fragment,null,c.a.createElement("h1",null,"Edit Student Profile"),c.a.createElement("p",null,"Edit your information."),c.a.createElement(K.a,{indicator:c.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},c.a.createElement(f.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,i,"/dashboard")}},c.a.createElement(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),c.a.createElement(f.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),c.a.createElement(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(f.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},c.a.createElement(h.a,{prefix:c.a.createElement(P.b,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),c.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Edit your information"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(p,i,"/")},okType:"danger",icon:c.a.createElement(re.a,{style:{color:"red"}})},c.a.createElement(b.a,{type:"primary",danger:!0},"Delete your account")))))})),Dt=Object(m.b)((function(e){return{user:e.auth.user}}))((function(e){var t=null;switch(e.user.kind){case"Administrator":t=c.a.createElement(Lt,null);break;case"Tutor":t=c.a.createElement(jt,null);break;case"Student":t=c.a.createElement(Pt,null);break;default:t=c.a.createElement(U,null)}return c.a.createElement(o.Fragment,null,t)})),Nt=Object(m.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=t.loading?null:c.a.createElement(u.b,{path:"/dashboard",render:function(e){return c.a.createElement(De,Object.assign({},e,{userKind:t.user.kind}))}});return c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{active:!0,loading:t.loading&&null!==t.user},c.a.createElement(j,null),c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/myProfile",component:Dt}),c.a.createElement(u.b,{path:"/register/tutor",component:D}),c.a.createElement(u.b,{path:"/register/student",component:N}),c.a.createElement(u.b,{path:"/login/guest",component:It}),c.a.createElement(u.b,{path:"/login",component:A}),c.a.createElement(u.b,{path:"/classroom/:id/tutor",component:_t}),c.a.createElement(u.b,{exact:!0,path:"/classroom/:id/",component:Tt}),a,c.a.createElement(u.b,{exact:!0,path:"/",component:At}),c.a.createElement(u.b,{component:U}))))})),Rt=a(75),Ut=a(385),Mt=a(386),Ft=[],Gt={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:null},Bt={loading:!0,tutors:[],students:[],classrooms:[]},Vt={loading:!0,messages:[],lectureStarted:!1,onlineUsers:[],publishToken:"",playToken:"",currentStreamerId:""},qt={loading:!1,isSharing:!1,webrtcConnected:!1,micMuted:!1},Jt={loading:!0,lectures:[],classrooms:[],students:[]},zt={loading:!0,lectures:[],classrooms:[]},Ht=Object(Rt.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(B.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(ae.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"LOGIN_SUCCESS":return Object(ae.a)({},e,{isAuthenticated:!0,loading:!1},n);case"REGISTER_SUCCESS":return Object(ae.a)({},e,{},n,{isAuthenticated:!0,loading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":case"REGISTER_FAIL":return Object(ae.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TUTORS":return{loading:!1,tutors:t.payload};case"GET_STUDENTS":return{loading:!1,students:t.payload};case"EDIT_TOTUR":case"EDIT_STUDENT":case"EDIT_CLASSROOM":case"DELETE_CLASSROOM":case"DELETE_STUDENT":case"DELETE_TUTOR":case"DELETE_ADMIN":case"EDIT_ADMIN":return Object(ae.a)({},e,{loading:!0});case"EDIT_TUTOR_SUCCESS":return{loading:!1,tutors:t.payload};case"EDIT_STUDENT_SUCCESS":return{loading:!1,students:t.payload};case"EDIT_CLASSROOM_SUCCESS":return{loading:!1,classrooms:t.payload};case"DELETE_TUTOR_SUCCESS":return{loading:!1,tutors:t.payload};case"DELETE_STUDENT_SUCCESS":return{loading:!1,students:t.payload};case"DELETE_CLASSROOM_SUCCESS":return{loading:!1,classrooms:t.payload};case"DELETE_STUDENT_FAIL":case"DELETE_TUTOR_FAIL":case"DELETE_CLASSROOM_FAIL":case"DELETE_ADMIN_FAIL":case"EDIT_TUTOR_FAIL":case"EDIT_STUDENT_FAIL":case"EDIT_CLASSROOM_FAIL":case"EDIT_ADMIN_FAIL":return Object(ae.a)({},e,{loading:!1});case"GET_CLASSROOMS":return{loading:!1,classrooms:t.payload};case"ADD_CLASSROOM":return{loading:!0,classrooms:[].concat(Object(B.a)(e.classrooms),[t.payload])};case"DELETE_ADMIN_SUCCESS":case"EDIT_ADMIN_SUCCESS":return{loading:!1};default:return Bt}},tutor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"GET_TUTOR_LECTURES":return{loading:!1,lectures:a,classrooms:[],students:[]};case"GET_TUTOR_CLASSROOMS":return{loading:!1,lectures:[],classrooms:a,students:[]};case"ADD_STUDENT_TO_CLASSROOM":case"DELETE_STUDENT_FROM_CLASSROOM":case"GET_STUDENT_CLASSROOMS":return Object(ae.a)({},e);case"ADD_STUDENT_TO_CLASSROOM_SUCCESS":return Object(ae.a)({},e,{loading:!1,students:[].concat(Object(B.a)(e.students),[a])});case"GET_STUDENTS_OF_CLASSROOM_SUCCESS":case"DELETE_STUDENT_FROM_CLASSROOM_SUCCESS":return Object(ae.a)({},e,{loading:!1,students:a});case"GET_STUDENTS_OF_CLASSROOM_FAIL":case"ADD_STUDENT_TO_CLASSROOM_FAIL":case"DELETE_STUDENT_FROM_CLASSROOM_FAIL":return Object(ae.a)({},e,{loading:!1});default:return Jt}},student:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=e.payload,a=e.type;switch(a){case"GET_STUDENT_LECTURES":return{loading:!1,lectures:t,classrooms:[]};case"GET_STUDENT_CLASSROOMS":return{loading:!1,lectures:[],classrooms:t};default:return zt}},lecture:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_MESSAGE":return Object(ae.a)({},e,{messages:[].concat(Object(B.a)(e.messages),[n])});case"START_LECTURE":return Object(ae.a)({},e,{lectureStarted:!0});case"STOP_LECTURE":return Object(ae.a)({},e,{lectureStarted:!1,publishToken:"",playToken:""});case"GET_MESSAGES":return Object(ae.a)({},e,{messages:n.data,loading:!1});case"LOAD_LECTURE":return Object(ae.a)({},e,{lectureStarted:n.hasStarted,onlineUsers:n.onlineUsers});case"USER_JOINED":return e.onlineUsers.find((function(e){return e._id===n._id}))?e:Object(ae.a)({},e,{onlineUsers:[].concat(Object(B.a)(e.onlineUsers),[n])});case"USER_LEFT":var r=e.onlineUsers.filter((function(e){return e._id!==n._id}));return Object(ae.a)({},e,{onlineUsers:r});case"GET_PUBLISH_TOKEN":return Object(ae.a)({},e,{publishToken:n.publishToken,currentStreamerId:n.currentStreamerId});case"GET_PLAY_TOKEN":return Object(ae.a)({},e,{playToken:n});case"ALLOW_USER_STREAM":return Object(ae.a)({},e,{currentStreamerId:n.currentStreamerId});case"SEND_MESSAGE":default:return e}},stream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0,a=(t.payload,t.type);switch(a){case"CONNECTION_SUCCESS":return Object(ae.a)({},e,{webrtcConnected:!0});case"CONNECTION_CLOSE":return Object(ae.a)({},e,{webrtcConnected:!1,isSharing:!1});case"START_SHARING":return Object(ae.a)({},e,{loading:!0});case"START_SHARING_SUCCESS":return Object(ae.a)({},e,{loading:!1,isSharing:!0});case"START_SHARING_FAIL":case"STOP_SHARING":return Object(ae.a)({},e,{loading:!1,isSharing:!1});case"TOGGLE_MIC":return Object(ae.a)({},e,{micMuted:!e.micMuted});default:return e}}}),Wt=[Mt.a],Yt=Object(Rt.createStore)(Ht,{},Object(Ut.composeWithDevTools)(Rt.applyMiddleware.apply(void 0,Wt))),Kt={auth:{token:null,isAuthenticated:null,loading:!0,user:null}};Yt.subscribe((function(){var e=Kt;if(Kt=Yt.getState(),e.auth.token!==Kt.auth.token){var t=Kt.auth.token;T(t)}}));var $t=Yt,Qt=(a(745),a(387)),Xt=a.n(Qt),Zt=a(784),ea=a(785),ta=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(e,t){return function(){var a=Object(y.a)(v.a.mark((function a(n){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:localStorage.setItem("token",""),setTimeout((function(){e.push(t),n({type:"LOGOUT"})}),2e3);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t,a=e.isAuthenticated,n=e.user,r=e.logout,s=Object(u.g)(),i=c.a.createElement(o.Fragment,null,c.a.createElement(X.a,null,c.a.createElement(X.a.Item,null,c.a.createElement(Zt.a,null),"My profile",c.a.createElement(l.b,{to:"/myProfile"})),c.a.createElement(X.a.Item,{onClick:function(){r(s,"")}},c.a.createElement(ea.a,null),"Log out")));return a&&n&&(t=c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"welcome-username"},c.a.createElement(G.a,{icon:c.a.createElement(P.b,{type:"user"}),size:"large"}),c.a.createElement(Ct.a,{overlay:i},c.a.createElement("span",null,"Welcome, ",n.name,"! ",c.a.createElement(P.b,{type:"down"})))))),c.a.createElement(c.a.Fragment,null,c.a.createElement(l.b,{to:""},c.a.createElement("img",{src:Xt.a,alt:"",className:"logo-placeholder"})),t)})),aa=p.a.Header,na=p.a.Footer;var ra=function(){return Object(o.useEffect)((function(){localStorage.token&&(T(localStorage.token),$t.dispatch(x()))}),[]),c.a.createElement(m.a,{store:$t},c.a.createElement(l.a,null,c.a.createElement(o.Fragment,null,c.a.createElement(p.a,{style:{minHeight:"100vh"}},c.a.createElement(aa,{style:{height:"130px"}},c.a.createElement(ta,null)),c.a.createElement(p.a,null,c.a.createElement(u.d,null,c.a.createElement(u.b,{component:Nt}))),c.a.createElement(na,null,"Swift Course - A Fast and Affordable Online Classroom System")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(ra,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[392,1,2]]]);