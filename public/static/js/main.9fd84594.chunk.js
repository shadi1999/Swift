(this["webpackJsonpswiftcourse-client"]=this["webpackJsonpswiftcourse-client"]||[]).push([[0],{351:function(e,t,a){e.exports=a.p+"static/media/hand-right.c8f9e738.svg"},358:function(e,t,a){e.exports=a.p+"static/media/default-monochrome.3a32a11f.svg"},364:function(e,t,a){e.exports=a(722)},370:function(e,t,a){},587:function(e,t){},648:function(e,t){},650:function(e,t){},657:function(e,t){},658:function(e,t){},659:function(e,t){},662:function(e,t){},721:function(e,t,a){},722:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(14),s=a.n(c),l=(a(369),a(370),a(5)),i=a(89),u=a(6),d=a(16),m=a(725),p=a(730),f=a(734),E=a(133),h=a(51),g=(a(135),a(3)),y=a.n(g),b=a(15),S=a(8),v=a(12),O=a.n(v),T=function(e){e?(O.a.defaults.headers.common["x-auth-token"]=e,localStorage.setItem("token",e)):(delete O.a.defaults.headers.common["x-auth-token"],localStorage.removeItem("token"))},C=(a(739),a(724)),k=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){switch(t){case"success":C.a.success(e,a/1e3);break;case"error":C.a.error(e,a/1e3);break;case"info":C.a.info(e,a/1e3);break;case"loading":C.a.loading(e,a/1e3);break;case"warning":default:C.a.warning(e,a/1e3)}}},w={URL:{Server:"https://www.swiftcourse.me",Client:"http://localhost:3000"}},_=w.URL.Server,I=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(_+"/api/auth/");case 3:a=e.sent,t({type:"USER_LOADED",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"AUTH_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},j=m.a.Content,A=(m.a.Sider,Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{login:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){var r,o,c,s,l,i,u;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={"Content-Type":"application/json"},o=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,O.a.post(_+"/api/auth/",o,{headers:r});case 5:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),n(I()),a.next=15;break;case 10:if(a.prev=10,a.t0=a.catch(2),s=a.t0.response.data.errors){l=Object(b.a)(s);try{for(l.s();!(i=l.n()).done;)u=i.value,n(k(u.msg,"error",7e3))}catch(d){l.e(a.t0)}finally{l.f()}}n({type:"LOGIN_FAIL"});case 15:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,n=e.user,c={wrapperCol:{offset:8,span:8}},s=p.a.useForm();Object(d.a)(s,1)[0];return a&&n?o.a.createElement(i.a,{to:"/dashboard"}):o.a.createElement(r.Fragment,null,o.a.createElement(j,null,o.a.createElement("h1",null,"Login Page"),o.a.createElement(p.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:8}},{name:"basic",initialValues:{remember:!0},onFinish:function(e){var a=e.email,n=e.password;t(a,n)}}),o.a.createElement(p.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(f.a,null)),o.a.createElement(p.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},o.a.createElement(f.a.Password,null)),o.a.createElement(p.a.Item,Object.assign({},c,{name:"remember",valuePropName:"checked"}),o.a.createElement(E.a,null,"Remember me"),o.a.createElement("br",null),"      "),o.a.createElement(p.a.Item,c,o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Submit")),o.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"),o.a.createElement("br",null),"Don't have an account? ",o.a.createElement(l.b,{to:"/register/student"},"Sign up as a student")," or ",o.a.createElement(l.b,{to:"/register/tutor"},"sign up as a tutor"),".")))}))),L=a(737),D=Object(u.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return o.a.createElement(L.a,{key:e.id,message:e.msg,type:e.alertType,showIcon:!0})}))})),P=a(728),x=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:k,registerTutor:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(S.a)(y.a.mark((function e(r){var o,c,s,l,i,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,O.a.post(_+"/api/tutors",c,o);case 5:s=e.sent,r({type:"REGISTER_SUCCESS",payload:s.data}),r(I()),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(2),e.t0.response){l=e.t0.response.data.errors,i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,r(k(d.msg,"error",7e3))}catch(m){i.e(e.t0)}finally{i.f()}}console.log("Error",e.t0),r({type:"REGISTER_FAIL"});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.registerTutor,n=e.isAuthenticated,c=p.a.useForm(),s=Object(d.a)(c,1)[0];return n?o.a.createElement(i.a,{to:"/dashboard"}):o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Registration page for tutors"),o.a.createElement(p.a,{form:s,onFinish:function(e){var n=e.name,r=e.email,o=e.password;o!==e.password2?t("Passwords do not match","error"):a({name:n,email:r,password:o})},initialValues:{Private:!1,record:!1}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input your name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Register"),o.a.createElement("br",null),o.a.createElement("br",null),"Already have an account? ",o.a.createElement(l.b,{to:"/login"},"Login")))})),R=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:k,registerStudent:function(e){var t=e.name,a=e.email,n=e.password;return function(){var e=Object(S.a)(y.a.mark((function e(r){var o,c,s,l,i,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={headers:{"Content-Type":"application/json"}},c=JSON.stringify({name:t,email:a,password:n}),e.prev=2,e.next=5,O.a.post(_+"/api/students",c,o);case 5:s=e.sent,r({type:"REGISTER_SUCCESS",payload:s.data}),r(I()),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),l=e.t0.response.data.errors){i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,r(k(d.msg,"error",7e3))}catch(m){i.e(e.t0)}finally{i.f()}}r({type:"REGISTER_FAIL"});case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.registerStudent,n=e.isAuthenticated,c=p.a.useForm(),s=Object(d.a)(c,1)[0];return n?o.a.createElement(i.a,{to:"/dashboard"}):o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Registration page for students"),o.a.createElement(p.a,{form:s,onFinish:function(e){var n=e.name,r=e.email,o=e.password;o!==e.password2?t("Passwords do not match","error"):a({name:n,email:r,password:o})},initialValues:{Private:!1,record:!1}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input your name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Register"),o.a.createElement("br",null),o.a.createElement("br",null),"Already have an account? ",o.a.createElement(l.b,{to:"/login"},"Login")))})),N=a(736),U=function(){return o.a.createElement(N.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:o.a.createElement(l.b,{to:"/"},o.a.createElement(h.a,{type:"primary"},"Back Home"))})},M=a(735),F=a(738),G=a(726),B=a(49),V=w.URL.Server,H=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r,o){var c,s,l,i,u,d,m,p,f,E;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.name,s=e.email,l=e._id,i={headers:{"Content-Type":"application/json"}},u=JSON.stringify({name:c,email:s,_id:l}),n.prev=3,r({type:"EDIT_TOTUR"}),n.next=7,O.a.put(V+"/api/tutors",u,i);case 7:d=o().admin.tutors.filter((function(e){return e._id!==l})),d=[].concat(Object(B.a)(d),[e]),setTimeout((function(){r({type:"EDIT_TUTOR_SUCCESS",payload:d}),t.push(a)}),2e3),n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(3),n.t0.response){m=n.t0.response.data.errors,p=Object(b.a)(m);try{for(p.s();!(f=p.n()).done;)E=f.value,r(k(E.msg,"error"))}catch(h){p.e(n.t0)}finally{p.f()}}console.log("Error",n.t0),r({type:"EDIT_TUTOR_FAIL"});case 17:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e,t){return n.apply(this,arguments)}}()},q=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r,o){var c,s,l,i,u,d;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_TUTOR"}),n.next=5,O.a.delete(V+"/api/tutors/".concat(e),c);case 5:s=o().admin.tutors.filter((function(t){return t._id!==e})),setTimeout((function(){r({type:"DELETE_TUTOR_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=15;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),l=n.t0.response.data.errors){i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,r(k(d.msg,"error"))}catch(m){i.e(n.t0)}finally{i.f()}}r({type:"DELETE_TUTOR_FAIL"});case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},J=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r,o){var c,s,l,i,u,d,m,p,f,E;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=e.name,s=e.email,l=e._id,i={headers:{"Content-Type":"application/json"}},u=JSON.stringify({name:c,email:s,_id:l}),n.prev=3,r({type:"EDIT_STUDENT"}),n.next=7,O.a.put(V+"/api/students",u,i);case 7:d=o().admin.students.filter((function(e){return e._id!==l})),d=[].concat(Object(B.a)(d),[e]),setTimeout((function(){r({type:"EDIT_STUDENT_SUCCESS",payload:d}),t.push(a)}),2e3),n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(3),n.t0.response){m=n.t0.response.data.errors,p=Object(b.a)(m);try{for(p.s();!(f=p.n()).done;)E=f.value,r(k(E.msg,"error"))}catch(h){p.e(n.t0)}finally{p.f()}}console.log("Error",n.t0),r({type:"EDIT_STUDENT_FAIL"});case 17:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e,t){return n.apply(this,arguments)}}()},z=function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r,o){var c,s,l,i,u,d;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_STUDENT"}),n.next=5,O.a.delete(V+"/api/students/".concat(e),c);case 5:s=o().admin.students.filter((function(t){return t._id!==e})),setTimeout((function(){r({type:"DELETE_STUDENT_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=15;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),l=n.t0.response.data.errors){i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,r(k(d.msg,"error"))}catch(m){i.e(n.t0)}finally{i.f()}}r({type:"DELETE_STUDENT_FAIL"});case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},W=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n,r,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(V+"/api/classrooms");case 3:a=e.sent,t({type:"GET_CLASSROOMS",payload:a.data}),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),console.log(e.t0),n=e.t0.response.data.errors){r=Object(b.a)(n);try{for(r.s();!(o=r.n()).done;)c=o.value,t(k(c.msg,"error"))}catch(s){r.e(e.t0)}finally{r.f()}}case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Y=Object(u.b)((function(e){return{tutors:e.admin.tutors,loading:e.admin.loading}}),{getTutors:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n,r,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(V+"/api/tutors");case 3:a=e.sent,t({type:"GET_TUTORS",payload:a.data}),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),e.t0.response){n=e.t0.response.data.errors,r=Object(b.a)(n);try{for(r.s();!(o=r.n()).done;)c=o.value,t(k(c.msg,"error"))}catch(s){r.e(e.t0)}finally{r.f()}}console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.tutors,a=e.loading,n=e.getTutors;return Object(r.useEffect)((function(){n()}),[]),o.a.createElement(M.a,{avatar:!0,title:!1,loading:a,active:!0},o.a.createElement(F.a,{loading:a,itemLayout:"horizontal",dataSource:t,renderItem:function(e){return o.a.createElement(F.a.Item,{actions:[o.a.createElement(l.b,{key:"tutor-edit",to:"/dashboard/tutor/".concat(e._id)},"edit")]},o.a.createElement(F.a.Item.Meta,{avatar:o.a.createElement(G.a,{icon:o.a.createElement(P.a,{type:"user"})}),title:o.a.createElement(l.b,{to:"/dashboard/tutor/".concat(e._id)},e.name)}))}}))})),K=a(167),$=a(306),Q=Object(u.b)((function(e){return{admin:e.auth.user,loading:e.auth.loading}}),{setAlert:k,addAdmin:function(e,t,a){var n=e.name,r=e.email,o=e.password;return function(){var e=Object(S.a)(y.a.mark((function e(c){var s,l,i,u,d,m,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json"}},l=JSON.stringify({name:n,email:r,password:o}),e.prev=2,e.next=5,O.a.post(V+"/api/administrators",l,s);case 5:i=e.sent,setTimeout((function(){c({type:"REGISTER_SUCCESS",payload:i.data}),t.push(a)}),2e3),c(I()),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),u=e.t0.response.data.errors){d=Object(b.a)(u);try{for(d.s();!(m=d.n()).done;)p=m.value,c(k(p.msg,"error"))}catch(f){d.e(e.t0)}finally{d.f()}}c({type:"REGISTER_FAIL"});case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,a=e.addAdmin,n=e.loading,c=Object(i.g)(),s=p.a.useForm(),l=Object(d.a)(s,1)[0];return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Add a New Administrator"),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:n},o.a.createElement(p.a,{form:l,onFinish:function(e){var n=e.name,r=e.email,o=e.password;o!==e.password2?t("Passwords do not match","error"):a({name:n,email:r,password:o},c,"/dashboard")},initialValues:{Private:!1,record:!1}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input the admin email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of the new administrator"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input the admin name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name of the new administrator"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input the password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input the password again!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"password confirm"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Add an Administrator"))))})),X=a(101),Z=a(318),ee=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(X.a,{theme:"dark",mode:"inline"},o.a.createElement(X.a.Item,{key:"home"},o.a.createElement(l.b,{to:"/dashboard"},o.a.createElement(P.a,{type:"home"}),"Home")),o.a.createElement(X.a.Item,{key:"tutors-list"},o.a.createElement(l.b,{to:"/dashboard/tutors"},o.a.createElement(P.a,{type:"team"}),"Tutors List")),o.a.createElement(X.a.Item,{key:"students-list"},o.a.createElement(l.b,{to:"/dashboard/students"},o.a.createElement(P.a,{type:"team"}),"Students List")),o.a.createElement(X.a.Item,{key:"classrooms"},o.a.createElement(l.b,{to:"/dashboard/classrooms"},o.a.createElement(P.a,{type:"video-camera"}),"Classrooms")),o.a.createElement(X.a.Item,{key:"add-classroom"},o.a.createElement(l.b,{to:"/dashboard/addClassroom"},o.a.createElement(Z.a,null),"New Classroom")),o.a.createElement(X.a.Item,{key:"add-extra-admin"},o.a.createElement(l.b,{to:"/dashboard/addAdmin"},o.a.createElement(P.a,{type:"user-add"}),"Add a New Admin"))))},te=Object(u.b)((function(e){return{students:e.admin.students,loading:e.admin.loading}}),{getStudents:function(){return function(){var e=Object(S.a)(y.a.mark((function e(t){var a,n,r,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(V+"/api/students");case 3:a=e.sent,t({type:"GET_STUDENTS",payload:a.data}),e.next=11;break;case 7:if(e.prev=7,e.t0=e.catch(0),e.t0.response){n=e.t0.response.data.errors,r=Object(b.a)(n);try{for(r.s();!(o=r.n()).done;)c=o.value,t(k(c.msg,"error"))}catch(s){r.e(e.t0)}finally{r.f()}}console.log("Error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.students,a=e.loading,n=e.getStudents;return Object(r.useEffect)((function(){n()}),[]),o.a.createElement(M.a,{avatar:!0,title:!1,loading:a,active:!0},o.a.createElement(F.a,{loading:a,itemLayout:"horizontal",dataSource:t,renderItem:function(e){return o.a.createElement(F.a.Item,{actions:[o.a.createElement(l.b,{key:"student-edit",to:"/dashboard/student/".concat(e._id)},"edit")]},o.a.createElement(F.a.Item.Meta,{avatar:o.a.createElement(G.a,{icon:o.a.createElement(P.a,{type:"user"})}),title:o.a.createElement(l.b,{to:"/dashboard/student/".concat(e._id)},e.name)}))}}))})),ae=a(10),ne=a(740),re=a(312),oe=Object(u.b)((function(e){return{tutors:e.admin.tutors,loading:e.admin.loading}}),{editTutor:H,deleteTutor:q})((function(e){var t,a=e.tutors,n=e.editTutor,c=e.deleteTutor,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],E=Object(i.h)().id;Object(r.useEffect)((function(){(t=a.find((function(e){return e._id===E})))&&m.setFieldsValue({email:t.email,name:t.name})}));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit tutor"),o.a.createElement("p",null,"Edit the tutors information."),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,l,"/dashboard/tutors/")}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of tutor"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name of tutor"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Edit tutor"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete the tutor?",okText:"Yes",cancelText:"No",onConfirm:function(){c(E,l,"/dashboard/tutors/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete the tutor")))))})),ce=Object(u.b)((function(e){return{students:e.admin.students,loading:e.admin.loading}}),{editStudent:J,deleteStudent:z})((function(e){var t,a=e.students,n=e.editStudent,c=e.deleteStudent,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],E=Object(i.h)().id;Object(r.useEffect)((function(){(t=a.find((function(e){return e._id===E})))&&m.setFieldsValue({email:t.email,name:t.name})}));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit student"),o.a.createElement("p",null,"Edit the student information."),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,l,"/dashboard/students/")}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of student"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name of student"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Edit student"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete the student?",okText:"Yes",cancelText:"No",onConfirm:function(){c(E,l,"/dashboard/students/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete the student")))))})),se=Object(u.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=t.loading?null:o.a.createElement("h1",null,"Welcome ",t.user.name," to the ",t.user.kind,"s Home Dashboard");return o.a.createElement(o.a.Fragment,null,o.a.createElement(r.Fragment,null,o.a.createElement(M.a,{loading:t.loading},a)))})),le=Object(u.b)((function(e){return{admin:e.auth.user,loading:e.auth.loading,classrooms:e.admin.classrooms}}),{setAlert:k,addClassroom:function(e,t,a){var n=e.id,r=e.tutor,o=e.Private,c=e.record;return function(){var e=Object(S.a)(y.a.mark((function e(s){var l,i,u,d,m,p,f;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={headers:{"Content-Type":"application/json"}},i=JSON.stringify({id:n,tutor:r,Private:o,record:c}),e.prev=2,e.next=5,O.a.post(V+"/api/classrooms",i,l);case 5:u=e.sent,s({type:"ADD_CLASSROOM",payload:u.data}),setTimeout((function(){t.push(a)}),2e3),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),d=e.t0.response.data.errors){m=Object(b.a)(d);try{for(m.s();!(p=m.n()).done;)f=p.value,s(k(f.msg,"error"))}catch(E){m.e(e.t0)}finally{m.f()}}case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},getClassrooms:W})((function(e){var t=e.setAlert,a=e.addClassroom,n=e.loading,c=e.classrooms,s=e.getClassrooms;Object(r.useEffect)((function(){s()}),[]);var l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0];return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Add a New Classroom"),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:n},o.a.createElement(p.a,{form:m,onFinish:function(e){var n,r=e.id,o=e.tutor,s=e.Private,i=e.record,u=Object(b.a)(c);try{for(u.s();!(n=u.n()).done;){if(n.value.id===r)return void t("This classroom already exsist !","error")}}catch(d){u.e(d)}finally{u.f()}a({id:r,tutor:o,Private:s,record:i},l,"/dashboard/classrooms/")},initialValues:{Private:!1,record:!1}},o.a.createElement(p.a.Item,{name:"id",rules:[{required:!0,message:"Please input the course id!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"video-camera",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Classroom ID"})),o.a.createElement(p.a.Item,{name:"tutor",rules:[{required:!0,message:"Please input the tutor email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email of new classroom's tutor"})),o.a.createElement(p.a.Item,{name:"Private",valuePropName:"checked"},o.a.createElement(E.a,null,"Private")),o.a.createElement(p.a.Item,{name:"record",valuePropName:"checked"},o.a.createElement(E.a,null,"Recored Lecture")),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Add Classroom"))))})),ie=a(731),ue=Object(u.b)((function(e){return{admin:e.auth.user,classrooms:e.admin.classrooms,loading:e.admin.loading}}),{getClassrooms:W})((function(e){var t=e.getClassrooms,a=e.loading,n=e.classrooms;return Object(r.useEffect)((function(){t()}),[]),o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"All Classrooms"),o.a.createElement(F.a,{loading:a,grid:{gutter:16,column:4},dataSource:n,renderItem:function(e){return o.a.createElement(F.a.Item,null,o.a.createElement(ie.a,{title:e.id},o.a.createElement(l.b,{to:"/dashboard/classrooms/".concat(e.id)},"View Classroom Information")))}}))})),de=a(299),me=a(296),pe=Object(u.b)((function(e){return{classrooms:e.admin.classrooms,loading:e.admin.loading}}),{editClassroom:function(e,t,a,n){return function(){var r=Object(S.a)(y.a.mark((function r(o,c){var s,l,i,u,d,m,p,f,E,h,g;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.id,l=e.Private,i=e.email,u=e.record,d={headers:{"Content-Type":"application/json"}},m=JSON.stringify({newid:t,id:s,Private:l,email:i,record:u}),r.prev=3,o({type:"EDIT_CLASSROOM"}),r.next=7,O.a.put(V+"/api/classrooms",m,d);case 7:p=c().admin.classrooms.filter((function(e){return e.id!==s})),p=[].concat(Object(B.a)(p),[e]),setTimeout((function(){o({type:"EDIT_CLASSROOM_SUCCESS",payload:p}),a.push(n)}),2e3),r.next=18;break;case 12:if(r.prev=12,r.t0=r.catch(3),console.log(r.t0),f=r.t0.response.data.errors){E=Object(b.a)(f);try{for(E.s();!(h=E.n()).done;)g=h.value,o(k(g.msg,"error"))}catch(y){E.e(r.t0)}finally{E.f()}}o({type:"EDIT_CLASSROOM_FAIL"});case 18:case"end":return r.stop()}}),r,null,[[3,12]])})));return function(e,t){return r.apply(this,arguments)}}()},deleteClassroom:function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r,o){var c,s,l,i,u,d;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_CLASSROOM"}),n.next=5,O.a.delete(V+"/api/classrooms/".concat(e),c);case 5:return n.next=7,o().admin.classrooms.filter((function(t){return t.id!==e}));case 7:s=n.sent,setTimeout((function(){r({type:"DELETE_CLASSROOM_SUCCESS",payload:s}),t.push(a)}),2e3),n.next=17;break;case 11:if(n.prev=11,n.t0=n.catch(1),console.log(n.t0),l=n.t0.response.data.errors){i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,r(k(d.msg,"error"))}catch(m){i.e(n.t0)}finally{i.f()}}r({type:"DELETE_CLASSROOM_FAIL"});case 17:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e,t){return n.apply(this,arguments)}}()}})((function(e){var t,a=e.classrooms,n=e.editClassroom,c=e.deleteClassroom,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],g=Object(i.h)().id,y=Object(r.useState)(!1),b=Object(d.a)(y,2),S=b[0],v=b[1],O=Object(r.useState)(!1),T=Object(d.a)(O,2),C=T[0],w=T[1];Object(r.useEffect)((function(){(t=a.find((function(e){return e.id===g})))&&m.setFieldsValue({newId:t.id,email:t.tutor.email}),v(t.private),w(t.recordLectures)}),[]);return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit Classroom"),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.newId,r=e.email,o=e.Private,c=e.record;t=Object(ae.a)({},t,{newId:a,email:r,Private:o,recordLectures:C}),a&&void 0!==o&&void 0!==c&&r?n(t,a,l,"/dashboard/classrooms/"):k("Please provide all fields","error")},className:"center-form"},o.a.createElement(p.a.Item,{name:"newId",label:"Classroom ID",rules:[{required:!0,message:"Please input id!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"video-camera",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"id of classroom"})),o.a.createElement(p.a.Item,{name:"email",label:"Tutor's email",rules:[{required:!0,message:"Please input email of tutor!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of tutor"})),o.a.createElement(p.a.Item,{name:"Private",valuePropName:"checked"},o.a.createElement(E.a,{checked:S},"Private")),o.a.createElement(p.a.Item,{name:"record",valuePropName:"checked"},o.a.createElement(E.a,{checked:C},"Recored Lecture")),o.a.createElement(h.a,{type:"primary",htmlType:"submit",icon:o.a.createElement(de.a,null)},"Submit"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete the classroom?",okText:"Yes",cancelText:"No",onConfirm:function(){c(g,l,"/dashboard/classrooms/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0,icon:o.a.createElement(me.a,null)},"Delete the classroom")))))})),fe=m.a.Content,Ee=m.a.Sider,he=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(Ee,null,o.a.createElement(ee,null)),o.a.createElement(fe,null,o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/dashboard/tutor/:id",component:oe}),o.a.createElement(i.b,{path:"/dashboard/tutors",component:Y}),o.a.createElement(i.b,{path:"/dashboard/addAdmin",component:Q}),o.a.createElement(i.b,{path:"/dashboard/student/:id",component:ce}),o.a.createElement(i.b,{path:"/dashboard/students",component:te}),o.a.createElement(i.b,{path:"/dashboard/addClassroom",component:le}),o.a.createElement(i.b,{path:"/dashboard/classrooms/:id",component:pe}),o.a.createElement(i.b,{path:"/dashboard/classrooms",component:ue}),o.a.createElement(i.b,{path:"/dashboard",component:se}))))},ge=a(302),ye=a(319),be=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(X.a,{theme:"dark",mode:"inline"},o.a.createElement(X.a.Item,{key:"home"},o.a.createElement(l.b,{to:"/dashboard"},o.a.createElement(ge.a,null),"Home")),o.a.createElement(X.a.Item,{key:"my-classrooms"},o.a.createElement(l.b,{to:"/dashboard/myClassrooms"},o.a.createElement(ye.a,null),"My Classrooms"))))},Se=a(729),ve=w.URL.Server,Oe=function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o,c,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get(ve+"/api/classrooms/tutor/".concat(e._id));case 3:n=t.sent,a({type:"GET_TUTOR_CLASSROOMS",payload:n.data}),t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(0),t.t0.response){r=t.t0.response.data.errors,o=Object(b.a)(r);try{for(o.s();!(c=o.n()).done;)s=c.value,a(k(s.msg,"error",12e3))}catch(l){o.e(t.t0)}finally{o.f()}}console.log("Error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Te=Object(u.b)((function(e){return{tutor:e.auth.user,classrooms:e.tutor.lectures,loading:e.tutor.loading}}),{getLectures:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o,c,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get(ve+"/api/classrooms/tutor/".concat(e._id,"/lectures"));case 3:n=t.sent,a({type:"GET_TUTOR_LECTURES",payload:n.data}),t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(0),t.t0.response){r=t.t0.response.data.errors,o=Object(b.a)(r);try{for(o.s();!(c=o.n()).done;)s=c.value,a(k(s.msg,"error",12e3))}catch(l){o.e(t.t0)}finally{o.f()}}console.log("Error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t,a=e.tutor,n=e.classrooms,c=(e.loading,e.getLectures),s=Object(i.h)().id,l=[],u=function(e){var t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24);return(n=n<10?"0"+n:n)+":"+(a=a<10?"0"+a:a)+":"+(t=t<10?"0"+t:t)},d=Object(b.a)(n);try{for(d.s();!(t=d.n()).done;){var m=t.value;if(m.id===s){var p,f=Object(b.a)(m.pastLectures);try{for(f.s();!(p=f.n()).done;){var E=p.value;if(E.key=E._id,E.duration=u(new Date(E.endedOn)-new Date(E.startedOn)),E.attendance){var h,g=Object(b.a)(E.attendance);try{for(g.s();!(h=g.n()).done;){var y=h.value;y.duration=u(y.duration)}}catch(S){g.e(S)}finally{g.f()}}l.push(E)}}catch(S){f.e(S)}finally{f.f()}}}}catch(S){d.e(S)}finally{d.f()}Object(r.useEffect)((function(){c(a)}),[]);return o.a.createElement(r.Fragment,null,o.a.createElement("h2",null,"The Lectures of ",s," Classroom"),o.a.createElement(Se.a,{columns:[{title:"Start Date",dataIndex:"startedOn",key:"startedOn"},{title:"Duration of Lecture",dataIndex:"duration",key:"duration"}],expandable:{expandedRowRender:function(e){return function(e){var t,a=[],n=Object(b.a)(e.attendance);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push({key:r._id,name:r.user.name,email:r.user.email,duration:r.duration})}}catch(S){n.e(S)}finally{n.f()}return o.a.createElement(Se.a,{columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Email",dataIndex:"email",key:"email"},{title:"Duration of Attendance",dataIndex:"duration",key:"duration"}],dataSource:a,pagination:!1})}(e)}},dataSource:l}))})),Ce=Object(u.b)((function(e){return{tutor:e.auth.user,classrooms:e.tutor.classrooms,loading:e.tutor.loading}}),{getClassrooms:Oe})((function(e){var t=e.tutor,a=e.classrooms,n=e.loading,c=e.getClassrooms;return Object(r.useEffect)((function(){c(t)}),[]),o.a.createElement(r.Fragment,null,o.a.createElement(F.a,{loading:n,grid:{gutter:16,column:4},dataSource:a,renderItem:function(e){return o.a.createElement(F.a.Item,null,o.a.createElement(ie.a,{theme:"dark",className:"classroom-card",title:e.id,extra:o.a.createElement(l.b,{to:"/dashboard/classroom/".concat(e.id,"/info")},"Edit Info")},o.a.createElement(h.a,{type:"primary",href:"/classroom/".concat(e.id,"/tutor")},"Go to Classroom"),o.a.createElement(h.a,{href:"/dashboard/classroom/".concat(e.id,"/lectures")},"View Lectures")))}}))})),ke=Object(u.b)((function(e){return{classrooms:e.tutor.classrooms,students:e.tutor.students,tutor:e.auth.user,loading:e.auth.loading}}),{getClassrooms:Oe,addStudentToClassroom:function(e,t,a,n){return function(){var r=Object(S.a)(y.a.mark((function r(o){var c,s,l,i,u;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,{headers:{"Content-Type":"application/json"}},o({type:"ADD_STUDENT_TO_CLASSROOM"}),r.next=5,O.a.post(ve+"/api/classrooms/".concat(t,"/students/").concat(e));case 5:c=r.sent,o({type:"ADD_STUDENT_TO_CLASSROOM_SUCCESS",payload:c.data}),a.push(n),r.next=15;break;case 10:if(r.prev=10,r.t0=r.catch(0),console.log(r.t0),o({type:"ADD_STUDENT_TO_CLASSROOM_FAIL"}),r.t0.response){s=r.t0.response.data.errors,l=Object(b.a)(s);try{for(l.s();!(i=l.n()).done;)u=i.value,o(k(u.msg,"error",12e3))}catch(d){l.e(r.t0)}finally{l.f()}console.log("Error",r.t0)}case 15:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()},getStudentsFromClassroom:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o,c,s,l;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},a({type:"GET_STUDENTS_OF_CLASSROOM"}),t.next=5,O.a.get(ve+"/api/classrooms/".concat(e,"/students"),n);case 5:r=t.sent,a({type:"GET_STUDENTS_OF_CLASSROOM_SUCCESS",payload:r.data}),t.next=13;break;case 9:if(t.prev=9,t.t0=t.catch(0),a({type:"GET_STUDENTS_OF_CLASSROOM_FAIL"}),t.t0.response){o=t.t0.response.data.errors,c=Object(b.a)(o);try{for(c.s();!(s=c.n()).done;)l=s.value,a(k(l.msg,"error",12e3))}catch(i){c.e(t.t0)}finally{c.f()}console.log("Error",t.t0)}case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},deleteStudentFromClassroom:function(e,t,a,n){return function(){var r=Object(S.a)(y.a.mark((function r(o){var c,s,l,i,u,d;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={headers:{"Content-Type":"application/json"}},o({type:"DELETE_STUDENT_FROM_CLASSROOM"}),r.next=5,O.a.delete(ve+"/api/classrooms/".concat(t,"/students/").concat(e),c);case 5:s=r.sent,o({type:"DELETE_STUDENT_FROM_CLASSROOM_SUCCESS",payload:s.data}),a.push(n),r.next=13;break;case 10:if(r.prev=10,r.t0=r.catch(0),r.t0.response){o({type:"DELETE_STUDENT_FROM_CLASSROOM_FAIL"}),l=r.t0.response.data.errors,i=Object(b.a)(l);try{for(i.s();!(u=i.n()).done;)d=u.value,o(k(d.msg,"error",12e3))}catch(m){i.e(r.t0)}finally{i.f()}console.log("Error",r.t0)}case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t,a,n=e.getClassrooms,c=e.addStudentToClassroom,s=e.deleteStudentFromClassroom,l=e.getStudentsFromClassroom,u=e.classrooms,m=e.students,p=e.tutor,g=(e.loading,Object(i.h)().id),b=Object(i.g)(),v="/dashboard/classroom/".concat(g,"/info"),O=Object(r.useState)(!1),T=Object(d.a)(O,2),C=T[0],k=T[1],w=Object(r.useState)(!1),_=Object(d.a)(w,2),I=_[0],j=_[1],A=Object(r.useState)(""),L=Object(d.a)(A,2),D=L[0],x=L[1],R=Object(r.useState)(!0),N=Object(d.a)(R,2),U=N[0],M=N[1];Object(r.useEffect)((function(){function e(){return(e=Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(p);case 2:t=u.find((function(e){return e.id===g})),a=t.id,k(t.private),j(t.recordLectures);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return o.a.createElement(r.Fragment,null,o.a.createElement(ie.a,{title:a},o.a.createElement(E.a,{disabled:!0,checked:C},"Private"),o.a.createElement("br",null),o.a.createElement(E.a,{disabled:!0,checked:I},"Record Lectures"),o.a.createElement("hr",null),U?o.a.createElement(h.a,{onClick:function(){l(g),M(!1)},htmlType:"submit"},"view students"):o.a.createElement(h.a,{onClick:function(){M(!0)},htmlType:"submit"},"hide students"),o.a.createElement("hr",null),o.a.createElement(F.a,{dataSource:m,className:U&&"hide-list",renderItem:function(e){return o.a.createElement(F.a.Item,{key:e._id},o.a.createElement(F.a.Item.Meta,{title:e.name,description:e.email}),o.a.createElement(ne.a,{title:"Are you sure that you want to delete the student?",okText:"Yes",cancelText:"Cancel",onConfirm:function(){return t=e.email,void s(t,g,b,v);var t},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete the student")),o.a.createElement("hr",null))}}),"Add or delete a student to the classroom ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(f.a,{id:"email",type:"text",prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email of the student",onChange:function(e){x(e.target.value)}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(h.a,{type:"primary",htmlType:"submit",onClick:function(){c(D,g,b,v)}},"Add the student")))})),we=m.a.Content,_e=m.a.Sider,Ie=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(_e,null,o.a.createElement(be,null)),o.a.createElement(we,null,o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/dashboard/classroom/:id/info",component:ke}),o.a.createElement(i.b,{path:"/dashboard/classroom/:id/lectures",component:Te}),o.a.createElement(i.b,{path:"/dashboard/myClassrooms",component:Ce}),o.a.createElement(i.b,{path:"/dashboard",component:se}))))},je=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(X.a,{theme:"dark",mode:"inline"},o.a.createElement(X.a.Item,{key:"home"},o.a.createElement(l.b,{to:"/dashboard"},o.a.createElement(P.a,{type:"user"}),"Home")),o.a.createElement(X.a.Item,{key:"my-classrooms"},o.a.createElement(l.b,{to:"/dashboard/myClassrooms"},o.a.createElement(P.a,{type:"video-camera"}),"My classrooms"))))},Ae=w.URL.Server,Le=Object(u.b)((function(e){return{student:e.auth.user,classrooms:e.student.classrooms,loading:e.student.loading}}),{getClassrooms:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o,c,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get(Ae+"/api/classrooms/student/".concat(e._id));case 3:n=t.sent,a({type:"GET_STUDENT_CLASSROOMS",payload:n.data}),t.next=11;break;case 7:if(t.prev=7,t.t0=t.catch(0),t.t0.response){r=t.t0.response.data.errors,o=Object(b.a)(r);try{for(o.s();!(c=o.n()).done;)s=c.value,a(k(s.msg,"error",12e3))}catch(l){o.e(t.t0)}finally{o.f()}}console.log("Error",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.student,a=e.classrooms,n=e.loading,c=e.getClassrooms;return Object(r.useEffect)((function(){c(t)}),[]),o.a.createElement(r.Fragment,null,o.a.createElement(F.a,{loading:n,grid:{gutter:16,column:4},dataSource:a,renderItem:function(e){return o.a.createElement(F.a.Item,null,o.a.createElement(ie.a,{title:e.id},o.a.createElement(l.b,{to:"/classroom/".concat(e.id)},"Go to The Classroom"),o.a.createElement("br",null),"Tutor: ",e.tutor.name,o.a.createElement("br",null),e.recordLectures&&e.pastLectures.length>0&&o.a.createElement(l.b,{to:"/replay/".concat(e.id,"/").concat(e.pastLectures[e.pastLectures.length-1],"/")},"Replay Latest Lecture")))}}))})),De=m.a.Content,Pe=m.a.Sider,xe=function(){return o.a.createElement(r.Fragment,null,o.a.createElement(Pe,null,o.a.createElement(je,null)),o.a.createElement(De,null,o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/dashboard/myClassrooms",component:Le}),o.a.createElement(i.b,{path:"/dashboard",component:se}))))},Re=function(e){var t=e.userKind;return"Administrator"===t?o.a.createElement(he,null):"Tutor"===t?o.a.createElement(Ie,null):"Student"===t?o.a.createElement(xe,null):o.a.createElement(i.a,{to:"/"})},Ne=a(118),Ue=a(60),Me=a(732),Fe=a(298),Ge=function(e){var t=e.message,a=e.senderFirstName,n=e.color,r=e.type;return o.a.createElement("div",{className:"chat-message"},o.a.createElement("div",{className:"avatar"},o.a.createElement(G.a,{style:{backgroundColor:n,verticalAlign:"middle"},size:"large"},a)),o.a.createElement("div",{className:"talk-bubble tri-right left-in round"},function(){switch(r){case"text":return o.a.createElement("div",{className:"talktext"},o.a.createElement("p",null,t));case"image":return o.a.createElement("img",{className:"img-attachment",src:"".concat(w.URL.Server,"/").concat(t)});case"file":var e=/([^\/]+$)/.exec(t)[0];return o.a.createElement(h.a,{className:"file-attachment",type:"link",href:"".concat(w.URL.Server,"/").concat(t),target:"_blank"},e," ",o.a.createElement(Fe.a,null))}}()))},Be=a(341),Ve=a.n(Be),He=a(169),qe=a(170);function Je(e){var t=function(){function e(t){Object(He.a)(this,e),this.streamId=t,this.totalBytesReceivedCount=0,this.totalBytesSent=0,this.packetsLost=0,this.fractionLost=0,this.startTime=0,this.lastBytesReceived=0,this.lastBytesSent=0,this.currentTimestamp=0,this.lastTime=0,this.timerId=0,this.firstByteSentCount=0,this.firstBytesReceivedCount=0}return Object(qe.a)(e,[{key:"averageOutgoingBitrate",get:function(){return Math.floor(8*(this.totalBytesSentCount-this.firstByteSentCount)/(this.currentTimestamp-this.startTime))}},{key:"averageIncomingBitrate",get:function(){return Math.floor(8*(this.totalBytesReceivedCount-this.firstBytesReceivedCount)/(this.currentTimestamp-this.startTime))}},{key:"currentOutgoingBitrate",get:function(){return Math.floor(8*(this.totalBytesSentCount-this.lastBytesSent)/(this.currentTimestamp-this.lastTime))}},{key:"currentIncomingBitrate",get:function(){return Math.floor(8*(this.totalBytesReceivedCount-this.lastBytesReceived)/(this.currentTimestamp-this.lastTime))}},{key:"currentTime",set:function(e){this.lastTime=this.currentTimestamp,this.currentTimestamp=e,0==this.startTime&&(this.startTime=e-1)}},{key:"totalBytesReceived",set:function(e){this.lastBytesReceived=this.totalBytesReceivedCount,this.totalBytesReceivedCount=e,0==this.firstBytesReceivedCount&&(this.firstBytesReceivedCount=e)}},{key:"totalBytesSent",set:function(e){this.lastBytesSent=this.totalBytesSentCount,this.totalBytesSentCount=e,0==this.firstByteSentCount&&(this.firstByteSentCount=e)}}]),e}(),a=this;for(var n in a.peerconnection_config=null,a.sdp_constraints=null,a.remotePeerConnection=new Array,a.remotePeerConnectionStats=new Array,a.remoteDescriptionSet=new Array,a.iceCandidateList=new Array,a.webSocketAdaptor=null,a.roomName=null,a.videoTrackSender=null,a.audioTrackSender=null,a.playStreamId=new Array,a.micGainNode=null,a.localStream=null,a.bandwidth=900,a.isMultiPeer=!1,a.multiPeerStreamId=null,a.isPlayMode=!1,a.debug=!1,a.publishMode="camera",a.candidateTypes=["udp","tcp"],a.desktopStream=null,a.camera_location="top",a.camera_margin=15,a.camera_percent=15,e)e.hasOwnProperty(n)&&(this[n]=e[n]);if(a.localVideo=document.getElementById(a.localVideoId),a.remoteVideo=document.getElementById(a.remoteVideoId),"camera"==a.mediaConstraints.video?a.publishMode="camera":"screen"==a.mediaConstraints.video?a.publishMode="screen":"screen+camera"==a.mediaConstraints.video&&(a.publishMode="screen+camera"),!("WebSocket"in window))return console.log("WebSocket not supported."),void a.callbackError("WebSocketNotSupported");if("undefined"==typeof navigator.mediaDevices&&0==a.isPlayMode)return console.log("Cannot open camera and mic because of unsecure context. Please Install SSL(https)"),void a.callbackError("UnsecureContext");if(this.switchDesktopwithCameraSource=function(e,t,n,r){a.desktopStream=e,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(r){var o=document.createElement("canvas"),c=o.getContext("2d"),s=document.createElement("video");s.srcObject=e,s.play();var l=document.createElement("video");l.srcObject=r,l.play();var i=o.captureStream(15);i.addTrack(n.getAudioTracks()[0]),null==a.localStream?(e.addTrack(n.getAudioTracks()[0]),a.gotStream(i)):a.switchDesktopSource(i,t,a.mediaConstraints,onended,null),setInterval((function(){o.width=s.videoWidth,o.height=s.videoHeight,c.drawImage(s,0,0,o.width,o.height);var e,t=s.videoWidth*(a.camera_percent/100),n=l.videoHeight/l.videoWidth*t,r=o.width-t-a.camera_margin;e="top"==a.camera_location?a.camera_margin:o.height-n-a.camera_margin,c.drawImage(l,r,e,t,n)}),66)})).catch((function(e){a.callbackError(e.name,e.message)}))},this.getUserMediaDetail=function(e,t,n,r){var o=n.getAudioTracks();if(o.length>0&&n.removeTrack(o[0]),n.getVideoTracks()[0].onended=function(t){a.callback("screen_share_stopped"),a.switchVideoSource(r,e,null,!0)},"undefined"!=t&&0!=t){var c={audio:t};console.log(c),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){"screen"==a.publishMode?(console.log(r),n.addTrack(t.getAudioTracks()[0]),a.switchDesktopSource(n,r,e,onended,!0)):"screen+camera"==a.publishMode?a.switchDesktopwithCameraSource(n,r,t,onended):(n.addTrack(t.getAudioTracks()[0]),a.gotStream(n))})).catch((function(e){console.log("Hey! error"),a.callbackError(e.name,e.message)}))}else console.log("I'm here..."),navigator.mediaDevices.getUserMedia(c).then((function(e){n.addTrack(e.getAudioTracks()[0]),a.gotStream(n)}))},this.getUserMedia=function(e,t,n){"screen+camera"==a.publishMode||"screen"==a.publishMode?(console.log(e),navigator.mediaDevices.getDisplayMedia(e).then((function(r){a.getUserMediaDetail(e,t,r,n)})).catch((function(e){if("NotAllowedError"===e.name)if(console.debug("Permission denied error"),a.callbackError("ScreenSharePermissionDenied"),null==a.localStream){a.openStream({video:!0,audio:!0})}else a.switchVideoCapture(n);else a.callbackError(e.name,e.message)}))):navigator.mediaDevices.getUserMedia(e).then((function(n){a.getUserMediaDetail(e,t,n)})).catch((function(e){a.callbackError(e.name,e.message)}))},this.openStream=function(e){a.mediaConstraints=e;var t=!1;"undefined"!=typeof e.audio&&0!=e.audio&&(t=e.audio),"undefined"!=typeof e.video?a.getUserMedia(e,t):(console.error("MediaConstraint video is not defined"),a.callbackError("media_constraint_video_not_defined"))},this.closeStream=function(){a.localStream.getVideoTracks().forEach((function(e){e.onended=null,e.stop()})),a.localStream.getAudioTracks().forEach((function(e){e.onended=null,e.stop()}))},this.checkBrowserScreenShareSupported=function(){window.addEventListener("message",(function e(t){(navigator.mediaDevices.getDisplayMedia||navigator.getDisplayMedia)&&(a.callback("browser_screen_share_supported"),window.removeEventListener("message",e))}),!1),window.postMessage("are-you-there","*")},a.checkBrowserScreenShareSupported(),this.isPlayMode||"undefined"==typeof a.mediaConstraints||null!=this.localStream)null!=a.webSocketAdaptor&&0!=a.webSocketAdaptor.isConnected()||(a.webSocketAdaptor=new o);else if("undefined"!=typeof a.mediaConstraints.video&&0!=a.mediaConstraints.video)a.mediaConstraints.audio.mandatory?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){navigator.mediaDevices.getUserMedia(a.mediaConstraints).then((function(t){var n=new AudioContext,r=n.createGain();r.gain.value=1;var o=n.createMediaStreamDestination();n.createMediaStreamSource(t).connect(r),a.micGainNode=n.createGain(),a.micGainNode.gain.value=1,n.createMediaStreamSource(e).connect(a.micGainNode),r.connect(o),a.micGainNode.connect(o),t.removeTrack(t.getAudioTracks()[0]),o.stream.getAudioTracks().forEach((function(e){t.addTrack(e)})),console.debug("Running gotStream"),a.gotStream(t)})).catch((function(e){a.callbackError(e.name,e.message)}))})).catch((function(e){a.callbackError(e.name,e.message)})):a.openStream(a.mediaConstraints,a.mode);else{var r={audio:a.mediaConstraints.audio};navigator.mediaDevices.getUserMedia(r).then((function(e){a.gotStream(e)})).catch((function(e){a.callbackError(e.name,e.message)}))}function o(){var e=new WebSocket(a.websocket_url),t=!1,n=-1,r=function(){-1!=n&&(a.debug&&console.debug("Clearing ping message timer"),clearInterval(n),n=-1)};this.close=function(){e.close()},e.onopen=function(){a.debug&&console.log("websocket connected"),n=setInterval((function(){e.send(JSON.stringify({command:"ping"}))}),3e3),t=!0,a.callback("initialized")},this.send=function(t){0!=e.readyState&&2!=e.readyState&&3!=e.readyState?(e.send(t),console.log("sent message:"+t)):a.callbackError("WebSocketNotConnected")},this.isConnected=function(){return t},e.onmessage=function(e){var t=JSON.parse(e.data);"start"==t.command?(a.debug&&console.debug("received start command"),a.startPublishing(t.streamId)):"takeCandidate"==t.command?(a.debug&&(console.debug("received ice candidate for stream id "+t.streamId),console.debug(t.candidate)),a.takeCandidate(t.streamId,t.label,t.candidate)):"takeConfiguration"==t.command?(a.debug&&console.log("received remote description type for stream id: "+t.streamId+" type: "+t.type),a.takeConfiguration(t.streamId,t.sdp,t.type)):"stop"==t.command?(console.debug("Stop command received"),a.closePeerConnection(t.streamId)):"error"==t.command?a.callbackError(t.definition):"notification"==t.command?(a.callback(t.definition,t),"play_finished"!=t.definition&&"publish_finished"!=t.definition||a.closePeerConnection(t.streamId)):"streamInformation"==t.command?a.callback(t.command,t):"pong"==t.command?a.callback(t.command):"trackList"==t.command?a.callback(t.command,t):"connectWithNewId"==t.command?(a.multiPeerStreamId=t.streamId,a.join(t.streamId)):"peerMessageCommand"==t.command&&a.callback(t.command,t)},e.onerror=function(e){console.log(" error occured: "+JSON.stringify(e)),r(),a.callbackError(e)},e.onclose=function(e){t=!1,console.log("connection closed."),r(),a.callback("closed",e)}}this.enableMicInMixedAudio=function(e){null!=a.micGainNode&&(a.micGainNode.gain.value=e?1:0)},this.publish=function(e,t){var n={command:"publish",streamId:e,token:t,video:a.localStream.getVideoTracks().length>0,audio:a.localStream.getAudioTracks().length>0};a.webSocketAdaptor.send(JSON.stringify(n))},this.joinRoom=function(e,t){a.roomName=e;var n={command:"joinRoom",room:e,streamId:t};a.webSocketAdaptor.send(JSON.stringify(n))},this.play=function(e,t,n,r){a.playStreamId.push(e);var o={command:"play",streamId:e,token:t,room:n,trackList:r};a.webSocketAdaptor.send(JSON.stringify(o))},this.stop=function(e){a.closePeerConnection(e);var t={command:"stop",streamId:e};a.webSocketAdaptor.send(JSON.stringify(t))},this.join=function(e){var t={command:"join",streamId:e,multiPeer:a.isMultiPeer&&null==a.multiPeerStreamId,mode:a.isPlayMode?"play":"both"};a.webSocketAdaptor.send(JSON.stringify(t))},this.leaveFromRoom=function(e){a.roomName=e;var t={command:"leaveFromRoom",room:e};console.log("leave request is sent for "+e),a.webSocketAdaptor.send(JSON.stringify(t))},this.leave=function(e){var t={command:"leave",streamId:a.isMultiPeer&&null!=a.multiPeerStreamId?a.multiPeerStreamId:e};a.webSocketAdaptor.send(JSON.stringify(t)),a.closePeerConnection(e),a.multiPeerStreamId=null},this.getStreamInfo=function(e){var t={command:"getStreamInfo",streamId:e};this.webSocketAdaptor.send(JSON.stringify(t))},this.enableTrack=function(e,t,a){var n={command:"enableTrack",streamId:e,trackId:t,enabled:a};this.webSocketAdaptor.send(JSON.stringify(n))},this.getTracks=function(e,t){a.playStreamId.push(e);var n={command:"getTrackList",streamId:e,token:t};a.webSocketAdaptor.send(JSON.stringify(n))},this.gotStream=function(e){a.localStream=e,a.localVideo.srcObject=e,null!=a.webSocketAdaptor&&0!=a.webSocketAdaptor.isConnected()||(a.webSocketAdaptor=new o)},this.switchVideoCapture=function(e){a.publishMode="camera",a.switchVideoSource(e,a.mediaConstraints,null,!0)},this.switchDesktopCapture=function(e){a.publishMode="screen";var t=!1;"undefined"!=typeof this.mediaConstraints.audio&&0!=this.mediaConstraints.audio&&(t=this.mediaConstraints.audio),a.getUserMedia(a.mediaConstraints,t,e)},this.switchDesktopCaptureWithCamera=function(e){a.publishMode="screen+camera";var t=!1;"undefined"!=typeof this.mediaConstraints.audio&&0!=this.mediaConstraints.audio&&(t=this.mediaConstraints.audio),a.getUserMedia(this.mediaConstraints,t)},a.arrangeStreams=function(e,t,n){console.log("0"),n&&null!=a.desktopStream&&a.desktopStream.getVideoTracks()[0].stop(),console.log("1");var r=a.localStream.getVideoTracks()[0];console.log("2"),a.localStream.removeTrack(r),console.log("3"),r.stop(),console.log("4"),a.localStream.addTrack(e.getVideoTracks()[0]),console.log("5"),a.localVideo.srcObject=a.localStream,console.log("6"),null!=t&&(e.getVideoTracks()[0].onended=function(e){t(e)})},this.switchVideoSource=function(e,t,n,r){navigator.mediaDevices.getUserMedia(t).then((function(t){null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].getSenders().find((function(e){return"video"==e.track.kind})).replaceTrack(t.getVideoTracks()[0]).then((function(e){a.arrangeStreams(t,n,r)})).catch((function(e){console.log(e.name)})):a.arrangeStreams(t,n,r)})).catch((function(e){a.callbackError(e.name)}))},this.switchDesktopSource=function(e,t,n,r,o){a.arrangeStreams(e,r,o)},this.onTrack=function(e,t){if(console.log("onTrack"),null!=a.remoteVideo)a.remoteVideo.srcObject!==e.streams[0]&&(a.remoteVideo.srcObject=e.streams[0],console.log("Received remote stream"));else{var n={stream:e.streams[0],track:e.track,streamId:t};a.callback("newStreamAvailable",n)}},this.iceCandidateReceived=function(e,t){if(e.candidate){if(a.candidateTypes.includes(e.candidate.protocol)){var n={command:"takeCandidate",streamId:t,label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate};a.debug&&(console.log("sending ice candiate for stream Id "+t),console.log(JSON.stringify(e.candidate)))}else a.debug&&console.log("Candidate's protocol("+e.candidate.protocol+") is not supported. Supported protocols: "+a.candidateTypes);a.webSocketAdaptor.send(JSON.stringify(n))}},this.initDataChannel=function(e,t){t.onerror=function(t){console.log("Data Channel Error:",t);var n={streamId:e,error:t};a.callbackError("data_channel_error",n)},t.onmessage=function(t){var n={streamId:e,event:t};a.callback("data_received",n)},t.onopen=function(){a.remotePeerConnection[e].dataChannel=t,console.log("Data channel is opened"),a.callback("data_channel_opened",e)},t.onclose=function(){console.log("Data channel is closed"),a.callback("data_channel_closed",e)}},this.initPeerConnection=function(e){if(null==a.remotePeerConnection[e]){var t=e;if(console.log("stream id in init peer connection: "+e+" close stream id: "+t),a.remotePeerConnection[e]=new RTCPeerConnection(a.peerconnection_config),a.remoteDescriptionSet[e]=!1,a.iceCandidateList[e]=new Array,a.playStreamId.includes(e)||null!=a.localStream&&a.remotePeerConnection[e].addStream(a.localStream),a.remotePeerConnection[e].onicecandidate=function(e){a.iceCandidateReceived(e,t)},a.remotePeerConnection[e].ontrack=function(e){a.onTrack(e,t)},0==a.isPlayMode){var n=a.remotePeerConnection[e].createDataChannel(e,{ordered:!0});a.initDataChannel(e,n)}else a.remotePeerConnection[e].ondatachannel=function(t){a.initDataChannel(e,t.channel)};a.remotePeerConnection[e].oniceconnectionstatechange=function(t){var n={state:a.remotePeerConnection[e].iceConnectionState,streamId:e};a.callback("ice_connection_state_changed",n),a.isPlayMode||"connected"==a.remotePeerConnection[e].iceConnectionState&&a.changeBandwidth(a.bandwidth,e).then((function(){console.log("Bandwidth is changed to "+a.bandwidth)})).catch((function(e){return console.error(e)}))}}},this.closePeerConnection=function(e){if(null!=a.remotePeerConnection[e]&&"closed"!=a.remotePeerConnection[e].signalingState){a.remotePeerConnection[e].close(),a.remotePeerConnection[e]=null,delete a.remotePeerConnection[e];var t=a.playStreamId.indexOf(e);-1!=t&&a.playStreamId.splice(t,1)}null!=a.remotePeerConnectionStats[e]&&(clearInterval(a.remotePeerConnectionStats[e].timerId),delete a.remotePeerConnectionStats[e])},this.signallingState=function(e){return null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].signalingState:null},this.iceConnectionState=function(e){return null!=a.remotePeerConnection[e]?a.remotePeerConnection[e].iceConnectionState:null},this.gotDescription=function(e,t){a.remotePeerConnection[t].setLocalDescription(e).then((function(n){console.debug("Set local description successfully for stream Id "+t);var r={command:"takeConfiguration",streamId:t,type:e.type,sdp:e.sdp};a.debug&&(console.debug("local sdp: "),console.debug(e.sdp)),a.webSocketAdaptor.send(JSON.stringify(r))})).catch((function(e){console.error("Cannot set local description. Error is: "+e)}))},this.turnOffLocalCamera=function(){null!=a.remotePeerConnection?a.localStream.getVideoTracks()[0].enabled=!1:this.callbackError("NoActiveConnection")},this.turnOnLocalCamera=function(){null!=a.remotePeerConnection?a.localStream.getVideoTracks()[0].enabled=!0:this.callbackError("NoActiveConnection")},this.muteLocalMic=function(){null!=a.remotePeerConnection?a.localStream.getAudioTracks()[0].enabled=!1:this.callbackError("NoActiveConnection")},this.unmuteLocalMic=function(){null!=a.remotePeerConnection?a.localStream.getAudioTracks()[0].enabled=!0:this.callbackError("NoActiveConnection")},this.takeConfiguration=function(e,t,n){var r=e,o=n,c=t;a.initPeerConnection(r),a.remotePeerConnection[r].setRemoteDescription(new RTCSessionDescription({sdp:c,type:o})).then((function(e){a.debug&&(console.debug("set remote description is succesfull with response: "+e+" for stream : "+r+" and type: "+o),console.debug(c)),a.remoteDescriptionSet[r]=!0;var t=a.iceCandidateList[r].length;console.debug("Ice candidate list size to be added: "+t);for(var n=0;n<t;n++)a.addIceCandidate(r,a.iceCandidateList[r][n]);a.iceCandidateList[r]=[],"offer"==o&&(console.log("try to create answer for stream id: "+r),a.remotePeerConnection[r].createAnswer(a.sdp_constraints).then((function(e){console.log("created answer for stream id: "+r),a.gotDescription(e,r)})).catch((function(e){console.error("create answer error :"+e)})))})).catch((function(e){a.debug&&console.error("set remote description is failed with error: "+e),(e.toString().indexOf("InvalidAccessError")>-1||e.toString().indexOf("setRemoteDescription")>-1)&&a.callbackError("notSetRemoteDescription")}))},this.takeCandidate=function(e,t,n){var r=e,o=new RTCIceCandidate({sdpMLineIndex:t,candidate:n});a.initPeerConnection(r),1==a.remoteDescriptionSet[r]?a.addIceCandidate(r,o):(console.debug("Ice candidate is added to list because remote description is not set yet"),a.iceCandidateList[r].push(o))},this.addIceCandidate=function(e,t){a.candidateTypes.includes(t.protocol)?a.remotePeerConnection[e].addIceCandidate(t).then((function(t){a.debug&&console.log("Candidate is added for stream "+e)})).catch((function(a){console.error("ice candiate cannot be added for stream id: "+e+" error is: "+a),console.error(t)})):a.debug&&console.log("Candidate's protocol("+t.protocol+") is not supported. Supported protocols:"+a.candidateTypes)},this.startPublishing=function(e){var t=e;a.initPeerConnection(t),a.remotePeerConnection[t].createOffer(a.sdp_constraints).then((function(e){a.gotDescription(e,t)})).catch((function(e){console.error("create offer error for stream id: "+t+" error: "+e)}))},this.getVideoSender=function(e){for(var t=null,n=a.remotePeerConnection[e].getSenders(),r=0;r<n.length;r++)if(null!=n[r].track&&"video"==n[r].track.kind){t=n[r];break}return t},this.changeBandwidth=function(e,t){var n="",r=a.getVideoSender(t);if(null!=r){var o=r.getParameters();return o.encodings||(o.encodings=[{}]),"unlimited"===e?delete o.encodings[0].maxBitrate:o.encodings[0].maxBitrate=1e3*e,r.setParameters(o)}return n="Video sender not found to change bandwidth",Promise.reject(n)},this.getStats=function(e){a.remotePeerConnection[e].getStats(null).then((function(t){var n=0,r=0,o=0,c=0,s=0;t.forEach((function(e){"inbound-rtp"==e.type?(n+=e.bytesReceived,r+=e.packetsLost,o+=e.fractionLost,c=e.timestamp):"outbound-rtp"==e.type&&(s+=e.bytesSent,c=e.timestamp)})),a.remotePeerConnectionStats[e].totalBytesReceived=n,a.remotePeerConnectionStats[e].packetsLost=r,a.remotePeerConnectionStats[e].fractionLost=o,a.remotePeerConnectionStats[e].currentTime=c,a.remotePeerConnectionStats[e].totalBytesSent=s,a.callback("updated_stats",a.remotePeerConnectionStats[e])}))},this.enableStats=function(e){a.remotePeerConnectionStats[e]=new t(e),a.remotePeerConnectionStats[e].timerId=setInterval((function(){a.getStats(e)}),5e3)},this.closeWebSocket=function(){for(var e in a.remotePeerConnection)a.remotePeerConnection[e].close();a.remotePeerConnection=new Array,a.webSocketAdaptor.close()},this.peerMessage=function(e,t,n){var r={command:"peerMessageCommand",streamId:e,definition:t,data:n};a.webSocketAdaptor.send(JSON.stringify(r))},this.sendData=function(e,t){a.remotePeerConnection[e].dataChannel.send(t)}}var ze,We=function(e,t){var a=t;n.publish(a,e)},Ye=function(e){return function(t){n.stop(e),t({type:"STOP_SHARING"})}},Ke=a(741),$e=function(e,t){return function(a,n){(ze=Ve()("".concat(w.URL.Server,"?token=").concat(e,"&classroom=").concat(t))).on("connect",(function(){ze.emit("loadLecture",null,(function(e,t,n){n=Qe(n),a({type:"LOAD_LECTURE",payload:{hasStarted:e,onlineUsers:n,slideUrl:t}})}))})),ze.on("message",(function(e){a({type:"ADD_MESSAGE",payload:e})})),ze.on("slidesUploaded",(function(e){a({type:"RECEIVE_SLIDE",payload:e})})),ze.on("slidesPageChanged",(function(e){a({type:"CHANGE_SLIDE_PAGE",payload:e})})),ze.on("startLecture",Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"START_LECTURE"}),"fake",a({type:"GET_PLAY_TOKEN",payload:"fake"});case 3:case"end":return e.stop()}}),e)})))),ze.on("stopLecture",(function(){ze.emit("leave"),a({type:"STOP_LECTURE"})})),ze.on("userJoined",(function(e){e=Xe(e,n().lecture.onlineUsers),a({type:"USER_JOINED",payload:e})})),ze.on("userLeft",(function(e){a({type:"USER_LEFT",payload:e})})),ze.on("sendPublishToken",(function(e){var t=e.token;a({type:"GET_PUBLISH_TOKEN",payload:{publishToken:t,currentStreamerId:n().auth.user._id}})})),ze.on("streamerChanged",(function(e){var r=e.newStreamer;a({type:"ALLOW_USER_STREAM",payload:{currentStreamerId:r}}),n().stream.isSharing&&n().auth.user._id!==r&&a(Ye(t))})),ze.on("handRaised",(function(e){var t=e.user,a=n().lecture.onlineUsers.find((function(e){return e._id===t}));Ke.a.info({message:"Hand raised",description:"".concat(a.name," is raising their hand."),duration:7})}))}},Qe=function(e){var t,a=[],n=Object(b.a)(e.entries());try{var r=function(){var n=Object(d.a)(t.value,2),r=n[0],o=n[1];if(a.includes(r))return"continue";if(e.some((function(e){return o.name===e.name}))){var c,s=[].concat(Ze),l=Object(b.a)(e);try{for(l.s();!(c=l.n()).done;){var i=c.value;o.name===i.name&&(i.color=s.pop(),a.push(e.indexOf(i)))}}catch(u){l.e(u)}finally{l.f()}o.color=s.pop()}else o.color=Ze[Math.floor(Math.random()*Ze.length)]};for(n.s();!(t=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}return e},Xe=function(e,t){var a=t.find((function(t){return e.name===t.name}));if(void 0!==a)do{e.color=Ze[Math.floor(Math.random()*Ze.length)],console.log(e.color,a.color)}while(e.color===a.color);else e.color=Ze[Math.floor(Math.random()*Ze.length)];return e},Ze=["#000","#ccc","#aaa","#0ec"],et=function(){return function(){var e=Object(S.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ze.emit("join");case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},tt=a(314),at=a(317),nt=a(342),rt=a.n(nt),ot=Object(u.b)((function(e){return{messages:e.lecture.messages,onlineUsers:e.lecture.onlineUsers,loading:e.lecture.loading,token:e.auth.token}}),{sendMessage:function(e){return function(t){ze.emit("sendMessage",e)}},loadMessages:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/getlivechat"));case 2:n=t.sent,a({type:"GET_MESSAGES",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.messages,a=e.sendMessage,n=e.loadMessages,c=e.onlineUsers,s=e.loading,l=e.token,u=Object(i.h)().id,m=Object(r.useState)(""),p=Object(d.a)(m,2),E=p[0],g=p[1];Object(r.useEffect)((function(){u&&n(u)}),[]);var y={name:"file",action:"".concat(w.URL.Server,"/api/files/upload/").concat(u),headers:{"x-auth-token":l},onChange:function(e){if("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var t;t=e.file.response.mimetype.startsWith("image")?"image":"file";var n=/([^\/]+$)/.exec(e.file.response.destination)[0],r="files/".concat(u,"/").concat(n,"/").concat(e.file.response.filename);a({text:r,type:t}),C.a.success("".concat(e.file.name," file uploaded successfully"))}else"error"===e.file.status&&C.a.error("".concat(e.file.name," file upload failed."))}},b=o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{type:"submit",onClick:function(){a(E)},icon:o.a.createElement(tt.a,null)},"Send"),o.a.createElement(Me.a,y,o.a.createElement(h.a,null,o.a.createElement(at.a,null))));return o.a.createElement("div",{className:"chat-container"},o.a.createElement(rt.a,{className:"chat-messages"},s?o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s}):t.map((function(e,t){var a=c.find((function(t){return e.sender===t._id}));if(void 0!==a)return o.a.createElement(Ge,{key:t,message:e.text,senderFirstName:a.name,color:a.color,type:e.type})}))),o.a.createElement(f.a,{onChange:function(e){return g({text:e.target.value,type:"text"})},addonAfter:b}))})),ct=a(172),st=a(308),lt=a(309),it=a(301),ut=a(173),dt=a(727),mt=a(83),pt=a(297),ft=a(293),Et=a(311),ht=a(310),gt=a(292),yt=a(291),bt=a(316),St=Object(u.b)((function(e){return{streamState:e.stream,publishToken:e.lecture.publishToken,currentStreamerId:e.lecture.currentStreamerId,user:e.auth.user}}),{initWebrtc:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var r,o,c,s,l,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(e));case 3:r=t.sent,o="wss://".concat(window.location.hostname,":5443/").concat(r.data.mediaServerApp,"/websocket"),n=new Je({websocket_url:o,mediaConstraints:{audio:!0,video:!0},peerconnection_config:null,sdp_constraints:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},localVideoId:"localVideo",debug:!0,callback:function(e,t){"initialized"==e?(console.log("initialized"),a({type:"CONNECTION_SUCCESS"})):"publish_started"==e?(console.log("publish started"),a({type:"START_SHARING_SUCCESS"})):"publish_finished"==e?(console.log("publish finished"),a({type:"STOP_SHARING"})):"closed"==e?("undefined"!=typeof t&&console.log("Connecton closed: "+JSON.stringify(t)),a({type:"CONNECTION_CLOSE"})):"refreshConnection"==e?(a({type:"START_SHARING"}),We()):"updated_stats"==e&&console.log("Average outgoing bitrate "+t.averageOutgoingBitrate+" kbits/sec Current outgoing bitrate: "+t.currentOutgoingBitrate+" kbits/sec")},callbackError:function(e,t){console.log("error callback: "+JSON.stringify(e));var n=JSON.stringify(e);"undefined"!=typeof t&&(n=t),-1!=e.indexOf("NotFoundError")?n="Camera or mic are not found or not allowed in your device.":-1!=e.indexOf("NotReadableError")||-1!=e.indexOf("TrackStartError")?n="Camera or mic is being used by some other program. Please, make sure and try again.":-1!=e.indexOf("OverconstrainedError")||-1!=e.indexOf("ConstraintNotSatisfiedError")?n="No device was found for audio/video.":-1!=e.indexOf("NotAllowedError")||-1!=e.indexOf("PermissionDeniedError")?n="Please, allow the browser to access camera and mic.":-1!=e.indexOf("TypeError")?n="Connection error.":-1!=e.indexOf("ScreenSharePermissionDenied")?n="Please, allow screen sharing in the browser.":-1!=e.indexOf("WebSocketNotConnected")&&(n="Connection error.",a({type:"CONNECTION_CLOSE"})),alert(n)}}),t.next=12;break;case 8:if(t.prev=8,t.t0=t.catch(0),t.t0.response&&(c=t.t0.response.data.errors)){s=Object(b.a)(c);try{for(s.s();!(l=s.n()).done;)i=l.value,a(k(i.msg,"error",5e3))}catch(u){s.e(t.t0)}finally{s.f()}}console.log("Error",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},startPublishingAction:function(e,t){return function(a){a({type:"START_SHARING"}),We(e,t)}},stopPublishing:Ye,toggleMic:function(){return function(e,t){t().stream.micMuted?n.unmuteLocalMic():n.muteLocalMic(),e({type:"TOGGLE_MIC"})}},switchMode:function(e,t){return function(a){switch(console.log(t,e),t){case"webcam":n.turnOnLocalCamera(),n.switchVideoCapture(e);break;case"screen":n.switchDesktopCapture(e);break;case"audio":n.turnOffLocalCamera()}}},disallowStudent:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ze.emit("disallowStudent",{to:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.streamState,a=e.publishToken,n=e.initWebrtc,c=e.startPublishingAction,s=e.stopPublishing,l=e.toggleMic,u=e.switchMode,d=e.currentStreamerId,m=e.user,p=e.disallowStudent,f=Object(i.h)().id;Object(r.useEffect)((function(){d===m._id&&n(f)}),[d,m]);return d===m._id?o.a.createElement(o.a.Fragment,null,o.a.createElement(ut.a.Group,{defaultValue:"webcam",onChange:function(e){u(f,e.target.value)}},o.a.createElement(ut.a.Button,{value:"webcam"},o.a.createElement(ye.a,null)," Webcam"),o.a.createElement(ut.a.Button,{value:"screen"},o.a.createElement(pt.a,null)," Screen"),o.a.createElement(ut.a.Button,{value:"audio"},o.a.createElement(ft.a,null)," Audio Only")),o.a.createElement(dt.a,null,t.isSharing?o.a.createElement(h.a,{onClick:function(){s(f)},icon:o.a.createElement(ht.a,null),type:"danger"},"Stop Sharing"):o.a.createElement(h.a,{onClick:function(){c(a,f)},disabled:!t.webrtcConnected,icon:o.a.createElement(Et.a,null),type:"primary"},"Start Sharing"),o.a.createElement(mt.a,{title:t.micMuted?"Unmute mic":"Mute mic"},o.a.createElement(h.a,{onClick:l,shape:"circle",icon:t.micMuted?o.a.createElement(gt.a,null):o.a.createElement(yt.a,null)})))):"Tutor"===m.kind?o.a.createElement(mt.a,{title:"Stop student from streaming to share your own stream"},o.a.createElement(h.a,{onClick:function(){p(f)},danger:!0,icon:o.a.createElement(bt.a,null)},"Share your stream and stop student")):null})),vt=a(363),Ot=a(361),Tt=a(348),Ct=a.n(Tt),kt=a(127),wt=a(224),_t=function(e){Object(vt.a)(a,e);var t=Object(Ot.a)(a);function a(e){var n;return Object(He.a)(this,a),(n=t.call(this,e)).state={},n}return Object(qe.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){var a=e.source!=this.props.source;return this.props=e,this.state=t,a&&this.change(e.source),!1}},{key:"componentDidMount",value:function(){this.change(this.props.source)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"destroyPlayer",value:function(){this.player&&this.player.destroy(),this.player=null,clearInterval(this.timer)}},{key:"change",value:function(e){var t=this;this.player&&this.destroyPlayer();var a=new wt.Engine,n=this;if(this.player=new Ct.a.Player({parent:this.refs.player,source:e,width:"100%",height:"100%",autoPlay:!0,hideMediaControl:!0,disableKeyboardShortcuts:!0,playbackNotSupportedMessage:"There was no stream at this part of the lecture.",disableErrorScreen:!0,events:{onError:function(e){setTimeout((function(){n.player.configure(n.player.options)}),3200)}},hlsjsConfig:{enableWorker:!0,liveSyncDurationCount:7,loader:a.createLoaderClass()}}),Object(wt.initClapprPlayer)(this.player),this.props.live){var r={http:0,p2p:0};a.on(kt.Events.PieceBytesDownloaded,(function(e,t){r[e]+=t,console.log(r)})),this.timer=setInterval(Object(S.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("".concat(w.URL.Server,"/api/lectures/downloadStats"),{downloadTotals:r,classroomId:t.props.classroomId});case 3:e.sent,r.http=0,r.p2p=0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),15e3)}}},{key:"render",value:function(){return o.a.createElement("div",{className:"clappr-vid",ref:"player"})}}]),a}(o.a.Component),It=a(304),jt=a(305),At=a(313),Lt=a(350),Dt=Object(u.b)((function(e){return{user:e.auth.user,slideUrl:e.lecture.slideUrl,page:e.lecture.slidePage,token:e.auth.token}}),{uploadSlides:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ze.emit("uploadSlides",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},changeSlidesPage:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a,n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"CHANGE_SLIDE_PAGE",payload:e}),"Tutor"===n().auth.user.kind&&ze.emit("changeSlidesPage",e);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.slideUrl,n=e.uploadSlides,c=e.token,s=e.changeSlidesPage,l=e.page,u=Object(r.useRef)(null),d=Object(i.h)().id,m=Object(Lt.a)({file:"".concat(w.URL.Server,"/").concat(a),page:l,canvasRef:u}),p=m.pdfDocument,f=(m.pdfPage,{name:"file",action:"".concat(w.URL.Server,"/api/files/upload/").concat(d),headers:{"x-auth-token":c},onChange:function(e){if("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var t=/([^\/]+$)/.exec(e.file.response.destination)[0],a="files/".concat(d,"/").concat(t,"/").concat(e.file.response.filename);n(a),C.a.success("".concat(e.file.name," file has been uploaded successfully."))}else"error"===e.file.status&&C.a.error("".concat(e.file.name," file upload failed."))}});return o.a.createElement("div",null,!p&&"Tutor"===t.kind&&o.a.createElement(Me.a.Dragger,f,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(It.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"Click or drag the slides to this area to upload"),o.a.createElement("p",{className:"ant-upload-hint"},"Please, upload a pptx, ppt or PDF file.")),o.a.createElement("canvas",{className:"slides-canvas",ref:u}),Boolean(p&&p.numPages)&&o.a.createElement("nav",null,o.a.createElement("ul",{className:"pager"},o.a.createElement("li",{className:"previous"},o.a.createElement(h.a,{shape:"circle",disabled:1===l,onClick:function(){s(l-1)},icon:o.a.createElement(jt.a,null)})),"".concat(l,"/").concat(p.numPages),o.a.createElement("li",{className:"next"},o.a.createElement(h.a,{shape:"circle",disabled:l===p.numPages,onClick:function(){s(l+1)},icon:o.a.createElement(At.a,null)})))))})),Pt=a(351),xt=a.n(Pt),Rt=Object(u.b)((function(e){return{token:e.auth.token,lectureStarted:e.lecture.lectureStarted,onlineUsers:e.lecture.onlineUsers,streamState:e.stream,playToken:e.lecture.playToken,currentStreamerId:e.lecture.currentStreamerId,publishToken:e.lecture.publishToken}}),{initSocket:$e,joinClassroom:et,raiseHand:function(){return function(e){ze.emit("raiseHand")}}})((function(e){var t=e.initSocket,a=e.joinClassroom,n=e.token,c=e.lectureStarted,s=e.streamState,l=(e.playToken,e.publishToken,e.onlineUsers),u=e.currentStreamerId,p=e.raiseHand,f=Object(r.useState)(""),E=Object(d.a)(f,2),g=E[0],b=E[1],v=Object(i.h)().id,T=Object(r.useState)(!1),C=Object(d.a)(T,2),k=C[0],_=C[1];Object(r.useEffect)((function(){t(n,v)}),[n,v]),Object(r.useEffect)((function(){c&&a()}),[c,v]),Object(r.useEffect)((function(){function e(){return(e=Object(S.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(v),{headers:{"x-auth-token":n}});case 3:t=e.sent,a=t.data,b(a.mediaServerApp),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var I=o.a.createElement(X.a,null,o.a.createElement(X.a.Item,{key:"0"},o.a.createElement(st.a,null),"Private message"));return o.a.createElement(m.a.Content,null,c?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne.a,{justify:"space-around",className:"classroom"},o.a.createElement(Ue.a,{span:6},o.a.createElement(ot,null),o.a.createElement("video",{id:"localVideo",className:s.isSharing?"clappr-vid":"hide",autoPlay:!0,muted:!0}),!s.isSharing&&g?o.a.createElement(_t,{className:"play-vid",source:"https://".concat(window.location.hostname,":5443/").concat(g,"/streams/").concat(v,".m3u8"),live:!0,classroomId:v}):""),o.a.createElement(Ue.a,{span:11},o.a.createElement(Dt,null)),o.a.createElement(Ue.a,{span:5},o.a.createElement(h.a,{onClick:function(){_(!0),p(),setTimeout((function(){_(!1)}),8e3)},disabled:k,shape:"round",icon:o.a.createElement("img",{src:xt.a,style:{marginRight:"7px",width:"20px"}})},"Raise your hand"),o.a.createElement(F.a,{bordered:!0,header:o.a.createElement(St,null),dataSource:l,renderItem:function(e){return o.a.createElement(F.a.Item,{key:e._id,actions:[o.a.createElement(ct.a,{overlay:I,trigger:["click"]},o.a.createElement("a",{onClick:function(e){return e.preventDefault()}},o.a.createElement(lt.a,null)))]},o.a.createElement(F.a.Item.Meta,{avatar:o.a.createElement(G.a,{className:u===e._id?"currentStreamer":"",style:{backgroundColor:e.color,verticalAlign:"middle"},size:"large"},e.name),title:e.name,description:e.kind}))}})))):o.a.createElement(N.a,{icon:o.a.createElement(it.a,null),title:"The lecture has not started yet.",extra:o.a.createElement(h.a,{type:"primary"},"Do Something")}))})),Nt=a(315),Ut=Object(u.b)((function(e){return{token:e.auth.token,lectureStarted:e.lecture.lectureStarted,onlineUsers:e.lecture.onlineUsers,streamState:e.stream,playToken:e.lecture.playToken,currentStreamerId:e.lecture.currentStreamerId}}),{initSocket:$e,joinClassroom:et,startLecture:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a,n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/start"));case 3:ze.emit("startLecture"),"fake",a({type:"GET_PUBLISH_TOKEN",payload:{publishToken:"fake",currentStreamerId:n().auth.user._id}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Error starting the lecture",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}()},stopLecture:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("".concat(w.URL.Server,"/api/classrooms/").concat(e,"/stop"));case 2:ze.emit("stopLecture");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},allowStudent:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{"fake",ze.emit("allowStudent",{to:e,token:"fake"})}catch(a){console.log(a)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},banStudentFromChat:function(e){return function(t){ze.emit("banStudentFromChat",{userId:e})}}})((function(e){var t=e.initSocket,a=e.joinClassroom,n=e.token,c=e.lectureStarted,s=e.startLecture,l=e.stopLecture,u=e.onlineUsers,p=e.streamState,f=(e.playToken,e.currentStreamerId),E=e.allowStudent,g=e.banStudentFromChat,b=Object(r.useState)(""),v=Object(d.a)(b,2),T=v[0],C=v[1],k=Object(i.h)().id;Object(r.useEffect)((function(){t(n,k)}),[n,k]),Object(r.useEffect)((function(){c&&a()}),[c,k]),Object(r.useEffect)((function(){function e(){return(e=Object(S.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(w.URL.Server,"/api/classrooms/").concat(k),{headers:{"x-auth-token":n}});case 3:t=e.sent,a=t.data,C(a.mediaServerApp),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return o.a.createElement(m.a.Content,null,c?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne.a,{justify:"space-around",className:"classroom"},o.a.createElement(Ue.a,{span:6},o.a.createElement(ot,null),o.a.createElement("video",{id:"localVideo",className:p.isSharing?"clappr-vid":"hide",autoPlay:!0,muted:!0,playsInline:!0}),!p.isSharing&&T?o.a.createElement(_t,{className:"play-vid",source:"https://".concat(window.location.hostname,":5443/").concat(T,"/streams/").concat(k,".m3u8"),live:!0,classroomId:k}):""),o.a.createElement(Ue.a,{span:11},o.a.createElement(Dt,null)),o.a.createElement(Ue.a,{span:5},o.a.createElement(h.a,{type:"danger",onClick:function(){l(k)}},"Stop Lecture"),o.a.createElement(F.a,{bordered:!0,header:o.a.createElement(St,null),dataSource:u,renderItem:function(e){return o.a.createElement(F.a.Item,{key:e._id,actions:[o.a.createElement(ct.a,{overlay:(t=e._id,o.a.createElement(X.a,null,o.a.createElement(X.a.Item,{key:"0",onClick:function(){return E(t)}},o.a.createElement(Z.a,null),"Allow to speak"),o.a.createElement(X.a.Item,{key:"1"},o.a.createElement(st.a,null),"Private message"),o.a.createElement(X.a.Item,{key:"2",onClick:function(){return g(t)}},o.a.createElement(Nt.a,null),"Ban from chat"))),trigger:["click"]},o.a.createElement("a",{onClick:function(e){return e.preventDefault()}},o.a.createElement(lt.a,null)))]},o.a.createElement(F.a.Item.Meta,{avatar:o.a.createElement(G.a,{className:f===e._id?"currentStreamer":"",style:{backgroundColor:e.color,verticalAlign:"middle"},size:"large"},e.name),title:e.name,description:e.kind}));var t}})))):o.a.createElement(N.a,{icon:o.a.createElement(it.a,null),title:"The lecture has not started yet.",extra:o.a.createElement(h.a,{type:"primary",onClick:function(){s(k)}},"Start a Lecture")}))})),Mt=a(360),Ft=Object(u.b)((function(e){return{playToken:e.lecture.playToken,currentStreamerId:e.lecture.currentStreamerId,currentReplayUrl:e.lecture.currentReplayUrl,replayDuration:e.lecture.replayDuration,replayTime:e.lecture.replayTime}}),{replayLecture:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n,r){var o,c,s,l,i,u,d,m,p,f,E,h;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:"STOP_LECTURE"}),a.prev=1,a.next=4,O.a.get("".concat(w.URL.Server,"/api/lectures/").concat(e,"/").concat(t));case 4:o=a.sent,c=o.data,s=c.lecture,l=c.streamHistory,i=s.chatMessages,u=s.slideHistory,d=s.onlineUsers,n({type:"SET_ONLINE_USERS",payload:Qe(d)}),m=new Date(s.endedOn)-new Date(s.startedOn),p=0,f=0,n({type:"SET_REPLAY_DURATOIN",payload:m}),E=setInterval((function(){p>=m&&clearInterval(E);for(var e=0;e<i.length;e++){var t=new Date(i[e].time)-new Date(s.startedOn);if(!(t>=p&&t<=p+1e3))break;n({type:"ADD_MESSAGE",payload:i[e]}),i.splice(e,1),e--}for(var a=0;a<u.length;a++){var o=new Date(u[a].date)-new Date(s.startedOn);if(!(o>=p&&o<=p+1e3))break;u[a].slideUrl!==r().lecture.slideUrl&&n({type:"RECEIVE_SLIDE",payload:u[a].slideUrl}),n({type:"CHANGE_SLIDE_PAGE",payload:u[a].slideNumber}),u.splice(a,1),a--}n({type:"SET_REPLAY_TIME",payload:p+=1e3})}),1e3),h=setInterval(function e(){return f>=m/6e4&&clearInterval(h),l[f.toString()]&&n({type:"CHANGE_CURRENT_REPLAY",payload:l[f.toString()]}),f++,e}(),6e4),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(1),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[1,16]])})));return function(e,t){return a.apply(this,arguments)}}()}})((function(e){e.playToken,e.currentStreamerId;var t=e.replayLecture,a=e.currentReplayUrl,n=e.replayDuration,c=e.replayTime,s=Object(i.h)(),l=s.classroomId,u=s.lectureId;function d(e){var t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),n=Math.floor(e/36e5%24);return(n=n<10?"0"+n:n)+":"+(a=a<10?"0"+a:a)+":"+(t=t<10?"0"+t:t)}Object(r.useEffect)((function(){t(l,u)}),[l,u]);return o.a.createElement(m.a.Content,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(Mt.a,{percent:c/n*100,format:function(){return"".concat(d(c)," / ").concat(d(n))}}),o.a.createElement(Ne.a,{justify:"space-around",className:"classroom"},o.a.createElement(Ue.a,{span:11},o.a.createElement(ot,null),o.a.createElement(_t,{className:"play-vid",source:"https://".concat(window.location.hostname,":5443/").concat("WebRTCApp","/streams/").concat(a),live:!1})),o.a.createElement(Ue.a,{span:11},o.a.createElement(Dt,null)))))})),Gt=a(733),Bt=Gt.a.create({name:"login-as-guest"})((function(e){var t=e.form,a=e.loginAsGuest,n=e.isAuthenticated,c=e.user,s=function(){var e=Object(S.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t.validateFields((function(e,t){e||a(t.username)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(n&&c)return o.a.createElement(i.a,{to:"/dashboard"});var l=t.getFieldDecorator;return o.a.createElement(r.Fragment,null,o.a.createElement("h2",null,"Login as a guest"),o.a.createElement(Gt.a,{onSubmit:s,className:"login-form"},o.a.createElement(Gt.a.Item,null,l("username",{rules:[{required:!0,message:"Please input your username!"}]})(o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),o.a.createElement(h.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))})),Vt=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{loginAsGuest:function(e){return function(){var t=Object(S.a)(y.a.mark((function t(a){var n,r,o,c,s,l,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},r=JSON.stringify({name:e}),t.prev=2,t.next=5,O.a.post(_+"/api/auth/guest",r,{headers:n});case 5:o=t.sent,a({type:"LOGIN_SUCCESS",payload:o.data}),t.next=14;break;case 9:if(t.prev=9,t.t0=t.catch(2),c=t.t0.response.data.errors){s=Object(b.a)(c);try{for(s.s();!(l=s.n()).done;)i=l.value,a(k(i.msg,"error",7e3))}catch(u){s.e(t.t0)}finally{s.f()}}a({type:"LOGIN_FAIL"});case 14:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}})(Bt),Ht=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.isAuthenticated,a=e.user,n=t?o.a.createElement(r.Fragment,null,o.a.createElement("h3",null,"welcome ",a.name," in Swift Course Home Page as a ",a.kind),o.a.createElement(l.b,{to:"/dashboard"},"Go to dashboard")):o.a.createElement(r.Fragment,null,o.a.createElement("h3",null,"welcome in Swift Course Home Page"),o.a.createElement("p",{style:{color:"#000000"}},"SiwftCourse, a web application that uses the BitTorrent protocol and other features that make it cost less bandwidth. The system will take advantage of the students\u2019 upload bandwidth to support the stream. To solve the timing of classes problem, the lecture will be recorded so students can still watch it after it ends for a period of 24 hours. Furthermore, there will be no need for a mobile app because the website will be responsive (supports all screen sizes)."),o.a.createElement("div",null,o.a.createElement(l.b,{to:"/register/student"},"join us"),"\xa0\xa0\xa0\xa0",o.a.createElement(l.b,{to:"/register/tutor"},"be a tutor in our site"),"\xa0\xa0\xa0\xa0",o.a.createElement(l.b,{to:"/login"},"Already have an account")));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Swift Course"),o.a.createElement("h2",null,"A Fast and Affordable Online Classroom System"),n)})),qt=Object(u.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteAdmin:function(e,t,a){return function(){var n=Object(S.a)(y.a.mark((function n(r){var o,c,s,l,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={headers:{"Content-Type":"application/json"}},n.prev=1,r({type:"DELETE_ADMIN"}),n.next=5,O.a.delete(V+"/api/administrators/".concat(e),o);case 5:setTimeout((function(){r({type:"DELETE_ADMIN_SUCCESS"}),t.push(a)}),2e3),r(I()),n.next=15;break;case 9:if(n.prev=9,n.t0=n.catch(1),console.log(n.t0),c=n.t0.response.data.errors){s=Object(b.a)(c);try{for(s.s();!(l=s.n()).done;)i=l.value,r(k(i.msg,"error"))}catch(u){s.e(n.t0)}finally{s.f()}}r({type:"DELETE_ADMIN_FAIL"});case 15:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},editAdmin:function(e,t,a){var n=e.name,r=e.email,o=e.password;return function(){var e=Object(S.a)(y.a.mark((function e(c){var s,l,i,u,d,m;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json"}},l=JSON.stringify({name:n,email:r,password:o}),e.prev=2,c({type:"EDIT_ADMIN"}),e.next=6,O.a.put(V+"/api/administrators/",l,s);case 6:setTimeout((function(){c({type:"EDIT_ADMIN_SUCCESS"}),t.push(a)}),2e3),c(I()),e.next=16;break;case 10:if(e.prev=10,e.t0=e.catch(2),console.log(e.t0),i=e.t0.response.data.errors){u=Object(b.a)(i);try{for(u.s();!(d=u.n()).done;)m=d.value,c(k(m.msg,"error"))}catch(p){u.e(e.t0)}finally{u.f()}}c({type:"EDIT_ADMIN_FAIL"});case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t,a=e.deleteAdmin,n=e.editAdmin,c=e.user,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],E=Object(i.h)().id;Object(r.useEffect)((function(){(t=c)&&m.setFieldsValue({email:t.email,name:t.name})}));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit administrator Profile"),o.a.createElement("p",null,"Edit your information."),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,l,"/dashboard")}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Edit your information"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(E,l,"/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete your account")))))})),Jt=Object(u.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteTutor:q,editTutor:H})((function(e){var t,a=e.deleteTutor,n=e.editTutor,c=e.user,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],E=Object(i.h)().id;Object(r.useEffect)((function(){(t=c)&&m.setFieldsValue({email:t.email,name:t.name})}));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit Tutor Profile"),o.a.createElement("p",null,"Edit your information."),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,l,"/dashboard")}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Edit your information"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(E,l,"/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete your account")))))})),zt=Object(u.b)((function(e){return{user:e.auth.user,loading:e.auth.loading}}),{deleteStudent:z,editStudent:J})((function(e){var t,a=e.deleteStudent,n=e.editStudent,c=e.user,s=e.loading,l=Object(i.g)(),u=p.a.useForm(),m=Object(d.a)(u,1)[0],E=Object(i.h)().id;Object(r.useEffect)((function(){(t=c)&&m.setFieldsValue({email:t.email,name:t.name})}));return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"Edit Student Profile"),o.a.createElement("p",null,"Edit your information."),o.a.createElement(K.a,{indicator:o.a.createElement($.a,{style:{fontSize:24},spin:!0}),size:"large",spinning:s},o.a.createElement(p.a,{form:m,onFinish:function(e){var a=e.email,r=e.name;t=Object(ae.a)({},t,{email:a,name:r}),n(t,l,"/dashboard")}},o.a.createElement(p.a.Item,{name:"email",rules:[{required:!0,message:"Please input email!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your email"})),o.a.createElement(p.a.Item,{name:"name",rules:[{required:!0,message:"Please input name!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"your name"})),o.a.createElement(p.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(p.a.Item,{name:"password2",rules:[{required:!0,message:"Please input your Password!"}]},o.a.createElement(f.a,{prefix:o.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),o.a.createElement(h.a,{type:"primary",htmlType:"submit"},"Edit your information"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ne.a,{title:"Are you sure that you want to delete your account?",okText:"Yes",cancelText:"No",onConfirm:function(){a(E,l,"/")},okType:"danger",icon:o.a.createElement(re.a,{style:{color:"red"}})},o.a.createElement(h.a,{type:"primary",danger:!0},"Delete your account")))))})),Wt=Object(u.b)((function(e){return{user:e.auth.user}}))((function(e){var t=null;switch(e.user.kind){case"Administrator":t=o.a.createElement(qt,null);break;case"Tutor":t=o.a.createElement(Jt,null);break;case"Student":t=o.a.createElement(zt,null);break;default:t=o.a.createElement(U,null)}return o.a.createElement(r.Fragment,null,t)})),Yt=Object(u.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,a=t.loading?null:o.a.createElement(i.b,{path:"/dashboard",render:function(e){return o.a.createElement(Re,Object.assign({},e,{userKind:t.user.kind}))}});return o.a.createElement(o.a.Fragment,null,o.a.createElement(M.a,{active:!0,loading:t.loading&&null!==t.user},o.a.createElement(D,null),o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/myProfile",component:Wt}),o.a.createElement(i.b,{path:"/register/tutor",component:x}),o.a.createElement(i.b,{path:"/register/student",component:R}),o.a.createElement(i.b,{path:"/login/guest",component:Vt}),o.a.createElement(i.b,{path:"/login",component:A}),o.a.createElement(i.b,{path:"/classroom/:id/tutor",component:Ut}),o.a.createElement(i.b,{exact:!0,path:"/classroom/:id/",component:Rt}),o.a.createElement(i.b,{path:"/replay/:classroomId/:lectureId/",component:Ft}),a,o.a.createElement(i.b,{exact:!0,path:"/",component:Ht}),o.a.createElement(i.b,{component:U}))))})),Kt=a(79),$t=a(356),Qt=a(357),Xt=[],Zt={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:null},ea={loading:!0,tutors:[],students:[],classrooms:[]},ta={loading:!0,messages:[],lectureStarted:!1,onlineUsers:[],publishToken:"",playToken:"",currentStreamerId:"",slideUrl:"",slidePage:1,currentReplayUrl:"",replayDuration:0,replayTime:0},aa={loading:!1,isSharing:!1,webrtcConnected:!1,micMuted:!1},na={loading:!0,lectures:[],classrooms:[],students:[]},ra={loading:!0,lectures:[],classrooms:[]},oa=Object(Kt.combineReducers)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(B.a)(e),[n]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(ae.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"LOGIN_SUCCESS":return Object(ae.a)({},e,{isAuthenticated:!0,loading:!1},n);case"REGISTER_SUCCESS":return Object(ae.a)({},e,{},n,{isAuthenticated:!0,loading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":case"REGISTER_FAIL":return Object(ae.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null});default:return e}},admin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TUTORS":return{loading:!1,tutors:t.payload};case"GET_STUDENTS":return{loading:!1,students:t.payload};case"EDIT_TOTUR":case"EDIT_STUDENT":case"EDIT_CLASSROOM":case"DELETE_CLASSROOM":case"DELETE_STUDENT":case"DELETE_TUTOR":case"DELETE_ADMIN":case"EDIT_ADMIN":return Object(ae.a)({},e,{loading:!0});case"EDIT_TUTOR_SUCCESS":return{loading:!1,tutors:t.payload};case"EDIT_STUDENT_SUCCESS":return{loading:!1,students:t.payload};case"EDIT_CLASSROOM_SUCCESS":return{loading:!1,classrooms:t.payload};case"DELETE_TUTOR_SUCCESS":return{loading:!1,tutors:t.payload};case"DELETE_STUDENT_SUCCESS":return{loading:!1,students:t.payload};case"DELETE_CLASSROOM_SUCCESS":return{loading:!1,classrooms:t.payload};case"DELETE_STUDENT_FAIL":case"DELETE_TUTOR_FAIL":case"DELETE_CLASSROOM_FAIL":case"DELETE_ADMIN_FAIL":case"EDIT_TUTOR_FAIL":case"EDIT_STUDENT_FAIL":case"EDIT_CLASSROOM_FAIL":case"EDIT_ADMIN_FAIL":return Object(ae.a)({},e,{loading:!1});case"GET_CLASSROOMS":return{loading:!1,classrooms:t.payload};case"ADD_CLASSROOM":return{loading:!0,classrooms:[].concat(Object(B.a)(e.classrooms),[t.payload])};case"DELETE_ADMIN_SUCCESS":case"EDIT_ADMIN_SUCCESS":return{loading:!1};default:return ea}},tutor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case"GET_TUTOR_LECTURES":return{loading:!1,lectures:a,classrooms:[],students:[]};case"GET_TUTOR_CLASSROOMS":return{loading:!1,lectures:[],classrooms:a,students:[]};case"ADD_STUDENT_TO_CLASSROOM":case"DELETE_STUDENT_FROM_CLASSROOM":case"GET_STUDENT_CLASSROOMS":return Object(ae.a)({},e);case"ADD_STUDENT_TO_CLASSROOM_SUCCESS":return Object(ae.a)({},e,{loading:!1,students:[].concat(Object(B.a)(e.students),[a])});case"GET_STUDENTS_OF_CLASSROOM_SUCCESS":case"DELETE_STUDENT_FROM_CLASSROOM_SUCCESS":return Object(ae.a)({},e,{loading:!1,students:a});case"GET_STUDENTS_OF_CLASSROOM_FAIL":case"ADD_STUDENT_TO_CLASSROOM_FAIL":case"DELETE_STUDENT_FROM_CLASSROOM_FAIL":return Object(ae.a)({},e,{loading:!1});default:return na}},student:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=e.payload,a=e.type;switch(a){case"GET_STUDENT_LECTURES":return{loading:!1,lectures:t,classrooms:[]};case"GET_STUDENT_CLASSROOMS":return{loading:!1,lectures:[],classrooms:t};default:return ra}},lecture:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"ADD_MESSAGE":return Object(ae.a)({},e,{messages:[].concat(Object(B.a)(e.messages),[n])});case"RECEIVE_SLIDE":return Object(ae.a)({},e,{slideUrl:n});case"CHANGE_SLIDE_PAGE":return Object(ae.a)({},e,{slidePage:n});case"START_LECTURE":return Object(ae.a)({},e,{lectureStarted:!0});case"STOP_LECTURE":return Object(ae.a)({},ta);case"GET_MESSAGES":return Object(ae.a)({},e,{messages:n.data,loading:!1});case"LOAD_LECTURE":return Object(ae.a)({},e,{lectureStarted:n.hasStarted,onlineUsers:n.onlineUsers,slideUrl:n.slideUrl,slidesPage:n.slidesPage});case"USER_JOINED":return e.onlineUsers.find((function(e){return e._id===n._id}))?e:Object(ae.a)({},e,{onlineUsers:[].concat(Object(B.a)(e.onlineUsers),[n])});case"USER_LEFT":var r=e.onlineUsers.filter((function(e){return e._id!==n._id}));return Object(ae.a)({},e,{onlineUsers:r});case"GET_PUBLISH_TOKEN":return Object(ae.a)({},e,{publishToken:n.publishToken,currentStreamerId:n.currentStreamerId});case"GET_PLAY_TOKEN":return Object(ae.a)({},e,{playToken:n});case"ALLOW_USER_STREAM":return Object(ae.a)({},e,{currentStreamerId:n.currentStreamerId});case"CHANGE_CURRENT_REPLAY":return Object(ae.a)({},e,{currentReplayUrl:n});case"SET_ONLINE_USERS":return Object(ae.a)({},e,{onlineUsers:n,loading:!1});case"SET_REPLAY_DURATOIN":return Object(ae.a)({},e,{replayDuration:n});case"SET_REPLAY_TIME":return Object(ae.a)({},e,{replayTime:n});case"SEND_MESSAGE":default:return e}},stream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0,a=(t.payload,t.type);switch(a){case"CONNECTION_SUCCESS":return Object(ae.a)({},e,{webrtcConnected:!0});case"CONNECTION_CLOSE":return Object(ae.a)({},e,{webrtcConnected:!1,isSharing:!1});case"START_SHARING":return Object(ae.a)({},e,{loading:!0});case"START_SHARING_SUCCESS":return Object(ae.a)({},e,{loading:!1,isSharing:!0});case"START_SHARING_FAIL":case"STOP_SHARING":return Object(ae.a)({},e,{loading:!1,isSharing:!1});case"TOGGLE_MIC":return Object(ae.a)({},e,{micMuted:!e.micMuted});default:return e}}}),ca=[Qt.a],sa=Object(Kt.createStore)(oa,{},Object($t.composeWithDevTools)(Kt.applyMiddleware.apply(void 0,ca))),la={auth:{token:null,isAuthenticated:null,loading:!0,user:null}};sa.subscribe((function(){var e=la;if(la=sa.getState(),e.auth.token!==la.auth.token){var t=la.auth.token;T(t)}}));var ia=sa,ua=(a(721),a(358)),da=a.n(ua),ma=a(303),pa=a(307),fa=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(e,t){return function(){var a=Object(S.a)(y.a.mark((function a(n){return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:localStorage.setItem("token",""),setTimeout((function(){e.push(t),n({type:"LOGOUT"})}),2e3);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t,a=e.isAuthenticated,n=e.user,c=e.logout,s=Object(i.g)(),u=o.a.createElement(r.Fragment,null,o.a.createElement(X.a,null,o.a.createElement(X.a.Item,null,o.a.createElement(ma.a,null),"My profile",o.a.createElement(l.b,{to:"/myProfile"})),o.a.createElement(X.a.Item,{onClick:function(){c(s,"")}},o.a.createElement(pa.a,null),"Log out")));return a&&n&&(t=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"welcome-username"},o.a.createElement(G.a,{icon:o.a.createElement(P.a,{type:"user"}),size:"large"}),o.a.createElement(ct.a,{overlay:u},o.a.createElement("span",null,"Welcome, ",n.name,"! ",o.a.createElement(P.a,{type:"down"})))))),o.a.createElement(o.a.Fragment,null,o.a.createElement(l.b,{to:""},o.a.createElement("img",{src:da.a,alt:"",className:"logo-placeholder"})),t)})),Ea=m.a.Header,ha=m.a.Footer;var ga=function(){return Object(r.useEffect)((function(){localStorage.token&&(T(localStorage.token),ia.dispatch(I()))}),[]),o.a.createElement(u.a,{store:ia},o.a.createElement(l.a,null,o.a.createElement(r.Fragment,null,o.a.createElement(m.a,{style:{minHeight:"100vh"}},o.a.createElement(Ea,{style:{height:"130px"}},o.a.createElement(fa,null)),o.a.createElement(m.a,null,o.a.createElement(i.d,null,o.a.createElement(i.b,{component:Yt}))),o.a.createElement(ha,null,"Swift Course - A Fast and Affordable Online Classroom System")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(ga,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[364,1,2]]]);
//# sourceMappingURL=main.9fd84594.chunk.js.map